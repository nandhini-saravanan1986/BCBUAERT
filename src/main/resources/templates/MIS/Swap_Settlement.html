<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css"
	href="/webjars/bootstrap/4.3.1/css/bootstrap.min.css"
	th:href="@{/webjars/bootstrap/4.3.1/css/bootstrap.min.css}">
<link rel="stylesheet" type="text/css"
	href="/webjars/font-awesome/5.9.0/css/all.min.css"
	th:href="@{/webjars/font-awesome/5.9.0/css/all.min.css}">
<link rel="stylesheet" type="text/css"
	href="/webjars/jquery-ui/1.12.1/jquery-ui.min.css"
	th:href="@{/webjars/jquery-ui/1.12.1/jquery-ui.min.css}">
<link rel="stylesheet" type="text/css"
	href="/webjars/datatables/1.10.19/css/jquery.dataTables.min.css"
	th:href="@{/webjars/datatables/1.10.19/css/jquery.dataTables.min.css}">
<link rel="shortcut icon" th:href="@{/favicon.ico}" type="image/x-icon">
<link rel="icon" th:href="@{/favicon.ico}" type="image/x-icon">
<link rel="stylesheet" th:href="@{/css/CustomButton.css}" />

<script src="/webjars/bootstrap/4.3.1/js/bootstrap.min.js"
	th:src="@{/webjars/bootstrap/4.3.1/js/bootstrap.min.js}"></script>
<script src="/webjars/popper.js/1.14.7/umd/popper.min.js"
	th:src="@{/webjars/popper.js/1.14.7/umd/popper.min.js}"></script>
<script src="/webjars/jquery/3.4.1/jquery.min.js"
	th:src="@{/webjars/jquery/3.4.1/jquery.min.js}"></script>
<script src="/webjars/jquery-ui/1.12.1/jquery-ui.min.js"
	th:src="@{/webjars/jquery-ui/1.12.1/jquery-ui.min.js}"></script>

<script src="/webjars/jquery-form/4.2.2/jquery.form.min.js"
	th:src="@{/webjars/jquery-form/4.2.2/jquery.form.min.js}"></script>

<script src="/webjars/jquery-validation/1.19.0/jquery.validate.min.js"
	th:src="@{/webjars/jquery-validation/1.19.0/jquery.validate.min.js}"></script>

<script src="/webjars/datatables/1.10.19/js/jquery.dataTables.min.js"
	th:src="@{/webjars/datatables/1.10.19/js/jquery.dataTables.min.js}"></script>
<script
	src="/webjars/datatables/1.10.19/js/dataTables.bootstrap4.min.js"
	th:src="@{/webjars/datatables/1.10.19/js/dataTables.bootstrap4.min.js}"></script>


	<style>
			

		.modal-backdrop {
				  position: fixed;
				  top: 0;
				  left: 0;
				  width: 120vw !important;              /* ðŸ‘ˆ a bit wider than viewport */
				  height: 120vh  !important;         /* ðŸ‘ˆ a bit taller than viewport */
				  background-color: #000;    /* ðŸ‘ˆ solid black base */
				  opacity: 0.7 !important;   /* ðŸ‘ˆ slightly darker overlay */
				  z-index: 1062;             /* ðŸ‘ˆ ensures it sits below modal but above everything else */
				}
			:root {
			  --bob-orange: #0073e6;
			  --bob-blue: #004080;
			  --overlay-bg: rgba(255, 255, 255, 0.9);
			}

			/* Full-screen overlay */
			.bob-loader {
			  position: fixed;
			  inset: 0;
			  display: flex;
			  align-items: center;
			  justify-content: center;
			  background: rgba(226, 232, 237, 0.6); /* lighter background */
			  backdrop-filter: blur(8px); /* âœ… background blur */
			  -webkit-backdrop-filter: blur(8px); /* Safari support */
			  z-index: 9999;
			  transition: opacity 0.25s ease, visibility 0.25s;
			  opacity: 1;
			  visibility: visible;
			}

			/* Hide when not active */
			.bob-loader[aria-hidden="true"] {
			  opacity: 0;
			  visibility: hidden;
			  pointer-events: none;
			}

			/* Loader card */
			.bob-loader-card {
			  display: flex;
			  flex-direction: column;
			  align-items: center;
			}

			/* Static logo */
			.logo-imgs {
			  height: 90px;
			  object-fit: contain;
			  display: block;
			}

			/* Flowing bar below logo */
			.flow-bar {
			  position: relative;
			  width: 200px; /* âœ… increased width */
			  height: 8px;  /* slightly thicker for better visibility */
			  background: #f1f1f1;
			  border-radius: 4px;
			  overflow: hidden;
			  margin-top: 10px;
			}

			.flow-line {
			  position: absolute;
			  left: -40%;
			  top: 0;
			  width: 40%;
			  height: 100%;
			  background: linear-gradient(90deg, var(--bob-orange), var(--bob-blue));
			  border-radius: 4px;
			  animation: flowMove 1.2s linear infinite;
			}

			/* Animation for flowing line */
			@keyframes flowMove {
			  0% {
			    left: -40%;
			  }
			  100% {
			    left: 100%;
			  }
			}


		</style>
		
	
	<style>

								
								
								
								body {
		    font-family: 'Segoe UI', Arial, sans-serif;
		    font-size: 14px;}
			
			
			
			.table .thead-light th {
		    color: #495057;
		    background-color: #e9ecef;
		    border-color: #dee2e6;
			font-family: sans-serif;
		}
							/* === ROLE PAGE CUSTOM HEADER === */
							.role-page-header {
							    background-color: #ffffff;
							    padding: 15px 20px;
							}

							.role-page-title h4 {
							    color: #003366;
							    font-family: "Segoe UI", Arial, sans-serif;
							    font-size: 20px;
							    font-weight: 700;
							    margin: 0;
							}

							.role-page-underline {
							    width: 158px;
							    height: 3px;
							    background-color: #0073e6;
							    border-radius: 2px;
							    margin-top: 6px;
							    box-shadow: 0 4px 12px rgba(0, 115, 230, 0.6); /* soft glow below */
							}


							/* Add Button Styling */
							.role-add-btn {
							    background: linear-gradient(135deg, #005fa3, #007bff);
							    color: #fff;
							    border: none;
							    border-radius: 25px;
							    padding: 8px 18px;
							    font-size: 13px;
							    font-weight: 600;
							    cursor: pointer;
							    box-shadow: 0 2px 5px rgba(0, 64, 128, 0.2);
							    transition: all 0.3s ease;
							}

							.role-add-btn:hover {
							    background: linear-gradient(135deg, #007bff, #3399ff);
							    transform: translateY(-2px);
							    box-shadow: 0 0 10px rgba(0, 102, 204, 0.4);
							}

							.role-add-btn i {
							    margin-right: 5px;
							}

							
						</style>
						<script>
							function goBack() {
							    window.history.back();
							}

							function goForward() {
							    window.history.forward();
							}

							// Detect mouse near screen edges
							document.addEventListener('mousemove', function(e) {
							    const backBtn = document.getElementById('floatingBackBtn');
							    const forwardBtn = document.getElementById('floatingForwardBtn');
							    const screenWidth = window.innerWidth;

							    // Left edge (back)
							    if (e.clientX < 50) {
							        backBtn.classList.add('show');
							    } else {
							        backBtn.classList.remove('show');
							    }

							    // Right edge (forward)
							    if (screenWidth - e.clientX < 50) {
							        forwardBtn.classList.add('show');
							    } else {
							        forwardBtn.classList.remove('show');
							    }
							});
							</script>

							<style>
							/* Shared styles for both buttons */
							#floatingBackBtn, 
							#floatingForwardBtn {
							    position: fixed;
							    top: 50%;
							    background-color: #0073e6;
							    border: none;
							    color: white;
							    font-size: 20px;
							    border-radius: 50%;
							    width: 45px;
							    height: 45px;
							    display: flex;
							    align-items: center;
							    justify-content: center;
							    opacity: 0;
							    pointer-events: none;
							    transition: all 0.4s ease;
							    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
							    z-index: 999;
							}

							/* Back button */
							#floatingBackBtn {
							    left: -50px; /* hidden off-screen */
							}

							/* Forward button */
							#floatingForwardBtn {
							    right: -50px; /* hidden off-screen */
							}

							/* Show when near edge */
							#floatingBackBtn.show {
							    left: 20px;
							    opacity: 1;
							    pointer-events: auto;
							}

							#floatingForwardBtn.show {
							    right: 20px;
							    opacity: 1;
							    pointer-events: auto;
							}

							/* Hover animation */
							#floatingBackBtn:hover,
							#floatingForwardBtn:hover {
							    background-color: #005bb5;
							    transform: scale(1.1);
							}
							</style>	
	<style>
			/* Red border for invalid inputs */
			input.error,
			select.error {
				border: 2px solid red !important;
			}

			/* Error message style */
			label.error {
				color: red;
				font-size: 0.85em;
				margin-top: 5px;
				display: block;
			}

			.underline {
				text-decoration: underline;
				color: #08a6f1;
				cursor: pointer;
			}

			.left-arrow-circle {
				width: 35px;
				height: 35px;
				border-radius: 50%;
				background-color: white;
				display: flex;
				align-items: center;
				justify-content: center;
				margin-right: 10px;
				transition: background-color 0.3s, transform 0.2s;
			}

			.left-arrow-circle i {
				color: rgb(107, 122, 143);
			}

			.left-arrow-circle:hover {
				background-color: rgb(107, 122, 143);
				cursor: pointer;
				transform: scale(1.05);
				border: 2px solid white;
			}

			.left-arrow-circle:hover i {
				color: white;
			}

			.white-text span {
				color: white !important;


			}
		</style>
<style>
	
.btns {
	float: right;
	margin: 5px;
}

.col-sm-5 {
	padding-bottom: 15px;
}

.list-body {
	padding: 0px;
}

.error {
	color: red;
	padding-left: 10px;
}

.formline {
	padding-bottom: 15px;
}

.btn-primary {
	background-color: #E77400;
	border-color: #0c0c0c;
}

.btn-primary:not(:disabled):not(.disabled).active,
.btn-primary:not(:disabled):not(.disabled):active,
.show > .btn-primary.dropdown-toggle {
    color: #fff;
    background-color: #cc0000;
    border-color: #161617;
}


#finusertb {
	width: 460px;
}

.dataTables_wrapper .dataTables_paginate .paginate_button {
	padding: 0px;
}
</style>
<style>
        .valids { color: green; }
        .invalids { color: red; }
    </style>
<script th:inline="javascript">
	/*<![CDATA[*/




	function home() {
		location.href = 'Dashboard'
	}

	function back() {
		window.history.back();
	}


	
	function adduser() {
		
		
		location.href = 'counterparty_list?formmode=add';
		
	}

	function list() {
		location.href = 'swap_settlement';
	}

	

	/*]]>*/
</script>

<script>
	function deleteuser() {
		
		var entryuser = document.querySelector('[data-entry_user]');
		var modifyuser = document.querySelector('[data-modify_user]');

		if (confirm('Are you sure you want to delete this User?')) {		
			document.getElementById("bob-loader").setAttribute("aria-hidden", "false");
			var userid = document.getElementById("userId").value;
			$.ajax({
				type : 'post',
				url : './deleteuser?formmode=' + userid,
				success : function(response) {
					document.getElementById("bob-loader").setAttribute("aria-hidden", "true");
					$("#alertmsg").text('User Deleted');
					$('#alert').modal("toggle");
				},
	            error: function(xhr, status, error) {
	            	document.getElementById("bob-loader").setAttribute("aria-hidden", "true");
	                alert('Not able to delete contact administrator');
	            }
			});
		}
		
	}
</script>
<script>
	function roledesc1() {

		var roleid = $("#roleId").find(':selected').val();

		if (roleid == 'VISAP1') {
			$("#roleDesc1").val("VISAP1");
		} else if (roleid == 'VISAR2') {
			$("#roleDesc1").val("VISAR2");
		} else if (roleid == 'RFI3') {
			$("#roleDesc1").val("RFI3");
		} else if (roleid == 'RFI3') {
			$("#roleDesc1").val("RFI3");
		} else if (roleid == 'CURINT4') {
			$("#roleDesc1").val("CURINT4");
		}
		$(this).find(':selected').text();

	}
	
	function brflogin() {

		var roleid = $("#roleId").find(':selected').val();

		if (roleid == 'VISAP1') {
			$("#roleDesc1").val("VISAP1");
		} else if (roleid == 'VISAR2') {
			$("#roleDesc1").val("VISAR2");
		} else if (roleid == 'RFI3') {
			$("#roleDesc1").val("RFI3");
		} else if (roleid == 'RFI3') {
			$("#roleDesc1").val("RFI3");
		} else if (roleid == 'CURINT4') {
			$("#roleDesc1").val("CURINT4");
		}
		$(this).find(':selected').text();

	}

	function home() {
		location.href = "/MIS/Dashboard";
	}

	function back() {
		window.history.back();
	}
</script>

<script>


function submitform() {
    var iBranchCode = $("#iBranchCode").val().trim();
    var iBranchName = $("#iBranchName").val().trim();
    var reportDate = $("#reportDate").val().trim();
    var fileInput = $("#file")[0].files[0];

    if (!iBranchCode || !iBranchName || !reportDate || !fileInput) {
        alert("All fields are required.");
        return;
    }

    let formData = new FormData();
    formData.append("iBranchCode", iBranchCode);
    formData.append("iBranchName", iBranchName);
    formData.append("reportDate", reportDate);
    formData.append("file", fileInput);
    formData.append("uploadedBy", $("#uploadedBy").val());

    $.ajax({
        url: "./Add_ASL",
        type: "POST",
        data: formData,
        contentType: false,
        processData: false,
        success: function (response) {
            console.log("Success:", response);
            $("#alertmsg").text(response);
            $('#alert').modal("toggle");
        },
        error: function (xhr, status, error) {
            console.error("Error:", error);
            $("#alertmsg").text("Error occurred: " + error);
            $('#alert').modal("toggle");
        }
    });
}


</script>

<script th:inline="javascript">
/*<![CDATA[*/
    var counterlist = /*[[${counterlist}]]*/ [];

    function validatelis(inputElem) {
        var inputVal = inputElem.value.trim().toLowerCase();
        var exists = false;
        var matches = [];

        // Reset previous suggestions
        $("#bankSuggestions").empty().hide();

        // Check for match and collect suggestions
        counterlist.forEach(function (item) {
            if (item.toLowerCase() === inputVal) {
                exists = true;
            } else if (item.toLowerCase().includes(inputVal) && inputVal !== "") {
                matches.push(item);
            }
        });

        // Show tooltip if exists
        if (exists) {
            $("#bankExistsMsg").show();
            $("#generatebtn").hide();
        } else {
            $("#bankExistsMsg").hide();
            $("#generatebtn").show();
        }

        // Show suggestions dropdown
        if (matches.length > 0) {
            matches.forEach(function (suggestion) {
                $("#bankSuggestions").append(
                    "<div class='suggestion-item' style='padding: 5px; cursor: pointer;'>" +
                    suggestion + "</div>"
                );
            });
            $("#bankSuggestions").show();
        }
    }

    // Handle click on suggestion
    $(document).on("click", ".suggestion-item", function () {
        $("#counterPartyBank").val($(this).text());
        $("#bankSuggestions").hide();
        validatelis(document.getElementById("counterPartyBank")); // re-validate after selection
    });

    // Hide suggestions if clicked outside
    $(document).click(function (e) {
        if (!$(e.target).closest("#counterPartyBank, #bankSuggestions").length) {
            $("#bankSuggestions").hide();
        }
    });
/*]]>*/
</script>
<style>
	.page-item.active .page-link {
    z-index: 1;
    color: #fff;
    background-color: #007bff;
    border-color: #007bff;
}
.btn{
font-size: unset !important;
}
.container-fluid {

    width: 100%;
    padding-top:1px;
    padding-right: 0px !important;
    padding-left: 0px !important;
    margin-right: auto;
    margin-left: auto;
}
</style>
<script>
	$(document).ready(function () {
		$('#usertable').DataTable({
					    scrollX: true,
					    autoWidth: false,
					    paging: true,
					    searching: true,
					    lengthChange: false,
					    ordering: true,
					    pageLength: 10,
					    fixedHeader: true,

					    // Layout: search (left) + pagination (right)
					    dom: '<"d-flex justify-content-between align-items-center mb-2"f p>t',

					    // Optional: language tweak for better label
					    language: {
					      search: "Search:"
					    }
					  });
					  
					  

	  // Fix search input alignment
	  $('div.dataTables_filter label').addClass('d-flex align-items-center gap-2 mb-0');
	  $('div.dataTables_filter input').addClass('form-control form-control-sm ms-2');
	});

  
  $(document).ready(function () {
	  $('#reportDate').on('change', function () {
	    const reportDate = this.value;

	    $.ajax({
	      type: 'GET',
	      url: './getSwap_Datas',
	      data: { reportDate: reportDate },
	      success: function (data) {
	        const table = $('#usertable').DataTable();
	        table.clear();

	        data.forEach(row => {
	          table.row.add([
    `<div style="text-align:center;">${row.formattedDate}</div>`,  // Centered date
    

    row.dealId,
    row.amount1,
    row.amount2,
    row.rateOrPrice,
    row.security,
    `<div style="text-align:center;">${row.tradeDate}</div>`,  // Centered date
    `<div style="text-align:center;">${row.valueDate}</div>`,  // Centered date
    row.counterpartyCode,
    
	            row.counterpartyName,
	            row.amount,
	            row.residualMaturity,
	            `<div style="text-align:center;">${row.maturityDate}</div>`,  // Centered date
	            row.ccf
	          ]);
	        });

	        table.draw();
	      },
	      error: function (xhr, status, error) {
	        console.error('AJAX error:', status, error);
	        alert('Error fetching data!');
	      }
	    });
	  });
	});
</script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('reportDate').value = today;
    });
    
    function SettlementLimit() {
        var ReportDate = $("#reportDate").val().trim();
    console.log(ReportDate);
        if (ReportDate === "") {
            alert("Please enter Report Date.");
            $("#reportDate").focus();
            return;
        }
        // Download file with selected branch and date
        window.location.href = './download/SettlementLimit?ReportDate=' + ReportDate;
    }
	
</script>
<script>

function check_date() {
    var iBranchCode = $("#iBranchCode").val().trim();
    var iBranchName = $("#iBranchName").val().trim();
    var reportDate = $("#reportDate").val().trim();
    var fileInput = $("#file")[0].files[0];

    if (!iBranchCode || !iBranchName || !reportDate || !fileInput) {
        alert("All fields are required.");
        return;
    }

    $.ajax({
    	url: "./search_date?reportDate=" + encodeURIComponent(reportDate) + "&iBranchCode=" + encodeURIComponent(iBranchCode)  + "&mode=settlement",
        type: "GET",
        success: function (response) {
            console.log("Success:", response);
            if (response > 0) {
                $("#alertmsg1").text("Report already exists for the selected date.");
                $('#alert1').modal("toggle");
            } else {
                submitform();
            }
        },
        error: function (xhr, status, error) {
            console.error("Error:", error);
            $("#alertmsg").text("Error occurred: " + error);
            $('#alert').modal("toggle");
        }
    });
}



function submitform() {
    var iBranchCode = $("#iBranchCode").val().trim();
    var iBranchName = $("#iBranchName").val().trim();
    var reportDate = $("#reportDate").val().trim();
    var fileInput = $("#file")[0].files[0];

    if (!iBranchCode || !iBranchName || !reportDate || !fileInput) {
        alert("All fields are required.");
        return;
    }

    let formData = new FormData();
    formData.append("iBranchCode", iBranchCode);
    formData.append("iBranchName", iBranchName);
    formData.append("reportDate", reportDate);
    formData.append("file", fileInput);
    formData.append("uploadedBy", $("#uploadedBy").val());
    document.getElementById("bob-loader").setAttribute("aria-hidden", "false");
    $.ajax({
        url: "./Add_ASL?mode=settlement",
        type: "POST",
        data: formData,
        contentType: false,
        processData: false,
        success: function (response) {
        	document.getElementById("bob-loader").setAttribute("aria-hidden", "true");
            console.log("Success:", response);
            $("#alertmsg").text(response);
            $('#alert').modal("toggle");
        },
        error: function (xhr, status, error) {
        	document.getElementById("bob-loader").setAttribute("aria-hidden", "true");
            console.error("Error:", error);
            $("#alertmsg").text("Error occurred: " + error);
            $('#alert').modal("toggle");
        }
    });
}

function ignore(){
	

	  $("#alertmsg1").text("");
	    $("#alert1").modal("hide");
}
function replace(){
	  $("#alertmsg1").text("");
	    $("#alert1").modal("hide");

    var iBranchCode = $("#iBranchCode").val().trim();
    var iBranchName = $("#iBranchName").val().trim();
    var reportDate = $("#reportDate").val().trim();
    var fileInput = $("#file")[0].files[0];

    if (!iBranchCode || !iBranchName || !reportDate || !fileInput) {
        alert("All fields are required.");
        return;
    }

    let formData = new FormData();
    formData.append("iBranchCode", iBranchCode);
    formData.append("iBranchName", iBranchName);
    formData.append("reportDate", reportDate);
    formData.append("file", fileInput);
    formData.append("uploadedBy", $("#uploadedBy").val());
    document.getElementById("bob-loader").setAttribute("aria-hidden", "false");
    $.ajax({
        url: "./Replace_data?mode=settlement",
        type: "POST",
        data: formData,
        contentType: false,
        processData: false,
        success: function (response) {
        	document.getElementById("bob-loader").setAttribute("aria-hidden", "true");
            console.log("Success:", response);
            $("#alertmsg").text(response);
            $('#alert').modal("toggle");
        },
        error: function (xhr, status, error) {
        	document.getElementById("bob-loader").setAttribute("aria-hidden", "true");
            console.error("Error:", error);
            $("#alertmsg").text("Error occurred: " + error);
            $('#alert').modal("toggle");
        }
    });
	
	
}

</script>
<script>
function get_branch() {
    var code = document.getElementById('iBranchCode').value;

    $.ajax({
        type: 'GET',
        url: './getbranch', // or './getbranch' if that's the actual endpoint
        data: { selected_branch: code }, // corrected key-value
        success: function (data) {
        	//alert(data)
            document.getElementById('iBranchName').value = data;
        },
        error: function () {
            alert("Failed to fetch branch name.");
        }
    });
}

function Branchcodeval() {
	var code = document.getElementById('iBranchCode').value;
 	
    switch (code) {
        case '9001': $("#iBranchName").val("Dubai"); break;
        case '9002': $("#iBranchName").val("Abu Dhabi"); break;
        case '9003': $("#iBranchName").val("Deira"); break;
        case '9004': $("#iBranchName").val("Sharja"); break;
        case '9005': $("#iBranchName").val("Ras Alkaima"); break;
        case '9008': $("#iBranchName").val("Syndication"); break;
        case '9010': $("#iBranchName").val("Treasury"); break;
        case '9019': $("#iBranchName").val("DFC"); break;
        default: $("#iBranchName").val(""); // clear if not matched
    }
}
</script>
</head>
<title>Riskinsights - ASL</title>
<body>
	
	<div class="container-fluid">
		<div class="row">
	<div th:insert="XBRLHeaderMenu :: header"></div>
			<div class="col-sm-12">

<div th:if="${formmode}=='add'">
		<div class="row">
			<div class="col-sm-12 ">
<form action="#" method="post" autocomplete="off" id="ASL_report" enctype="multipart/form-data">
						<div class="card">
							
									
									
									<div class="role-page-header d-flex justify-content-between align-items-center">
																						    <!-- Left: Page Title -->
																						    <div class="role-page-title">
																						        <h4 th:text="${menu}"></h4>
																									<div style="width: 300px;
																											    height: 3px;
																											    background-color: #0073e6;
																											    border-radius: 2px;
																											    margin-top: 6px;
																											    box-shadow: 0 4px 12px rgba(0, 115, 230, 0.6);"></div>
																												</div>
<!-- Right: Add Button -->
<div>
	<button type="button" class="role-add-btn" 
	onclick="window.location.href='./download/excel?mode=settlement'">
		Template Download</button>
</div>
</div>
									
									
									
							<div class="card-body">

								<input autocomplete="false" name="hidden" type="text"
									style="display: none;">
								<div class="form-group">
																<!-- Branch Code Row -->
<div class="row formline">
    <div class="col-sm-3"></div>

    <div class="col-sm-2">
        <label for="iBranchCode">Branch Code <b style="color: red;">*</b></label>
    </div>

    <!-- For ADM: editable input with datalist -->
    <div class="col-sm-3" th:if="${ROLEID == 'ADM-M' or ROLEID == 'ADM-C' or ROLEID == 'MGR'}">
         <input type="text" id="iBranchCode" name="iBranchCode"
               class="form-control form-control-sm"
               list="branchCodeList" autocomplete="off"
               th:value="${BRANCHCODE}" required   oninput="Branchcodeval()"  />
        <datalist id="branchCodeList">
			<option value="9001">9001</option>
			<option value="9002">9002</option>
			<option value="9003">9003</option>
			<option value="9004">9004</option>
			<option value="9005">9005</option>
			<option value="9008">9008</option>
			<option value="9009">9009</option>
			<option value="9010">9010</option>
        </datalist>
    </div>

    <!-- For non-ADM: readonly input -->
    <div class="col-sm-3" th:if="${ROLEID != 'ADM-M' AND ROLEID != 'ADM-C' AND ROLEID != 'MGR'}">
        <input type="text" id="iBranchCode" name="iBranchCode"
               class="form-control form-control-sm"
               th:value="${BRANCHCODE}" readonly />
    </div>
</div>

<!-- Branch Name Row -->
<div class="row formline">
    <div class="col-sm-3"></div>

    <div class="col-sm-2">
        <label for="iBranchName">Branch Name <b style="color: red;">*</b></label>
    </div>

    <div class="col-sm-3 position-relative">
        <input type="text" id="iBranchName" name="iBranchName"
               class="form-control form-control-sm"
               th:value="${BRANCHNAME}" readonly />
    </div>
</div>
									<div class="row formline">
										<div class="col-sm-3"></div>
										<div class="col-sm-2">
											<label for="file">File<b style="color: red;">*</b></label>
										</div>
										<div class="col-sm-3">
											<input type="file" name="file" id="file"
												class="form-control form-control-sm" autocomplete="new-text"
												required />
										</div>
									</div>
									<div class="row formline">
										<div class="col-sm-3"></div>
										<div class="col-sm-2">
											<label for="uploadedBy">Uploaded By<b style="color: red;">*</b></label>
										</div>
										<div class="col-sm-3">
											<input type="text" name="uploadedBy" id="uploadedBy"
												class="form-control form-control-sm" 
												required th:value="${userid}" readonly  />
										</div>
									</div>
									<div class="row formline">
										<div class="col-sm-3"></div>
										<div class="col-sm-2">
											<label for="reportDate">Report Date<b style="color: red;">*</b></label>
										</div>
										<div class="col-sm-3">
											<input type="date" name="reportDate" id="reportDate"
												class="form-control form-control-sm" 
												required />
										</div>
									</div>
								</div>
								<div class="card-footer text-center">
									<button type="button" class="role-add-btn" id="generatebtn"
										onclick="check_date();">Submit</button>

								</div>
							</div>
						</div>
					</form>

				</div>
		</div>
	</div>
		<div th:if="${formmode}=='list'">

			<div class="card" >
				
				
				
							<div class="role-page-header d-flex justify-content-between align-items-center">
																										    <!-- Left: Page Title -->
																										    <div class="role-page-title">
																										        <h4 th:text="${menu}"></h4>
																													<div style="width: 172px;
																															    height: 3px;
																															    background-color: #0073e6;
																															    border-radius: 2px;
																															    margin-top: 6px;
																															    box-shadow: 0 4px 12px rgba(0, 115, 230, 0.6);"></div>
																																</div>
				<!-- Right: Add Button -->
				<div class="form-inline">
				<label for="reportDate" class="mr-2">Report Date:</label> <input
					type="date" id="reportDate" name="reportDate"
					class="form-control form-control-sm"
					value="${#dates.format(#dates.createNow(), 'yyyy-MM-dd')}" />
					<button type="button" class="role-add-btn ml-3" onclick="SettlementLimit()">
					 Download</button>
				</div>
				</div>
											
				
				
				


				<div class="row">
				
					<div class="table-container" style="padding: 0px 15px;">
																<table class="table table-striped table-bordered table-hover" id="usertable">

																	<thead style="background-color: #e9ecf0; "
																		class="thead-light">
										<tr>
											<th style="white-space: nowrap;">Report Date</th>
											<th style="white-space: nowrap;">Deal ID</th>
											<th style="white-space: nowrap;">Amount 1</th>
											<th style="white-space: nowrap;">Amount 2</th>
											<th style="white-space: nowrap;">Rate / Price</th>
											<th style="white-space: nowrap;">Security</th>
											<th style="white-space: nowrap;">Trade Date</th>
											<th style="white-space: nowrap;">Value Date</th>
											<th style="white-space: nowrap;">Cpty. Code</th>

											<th style="white-space: nowrap;">Counter Party</th>
											<th style="white-space: nowrap;">Amount</th>
											<th style="white-space: nowrap;">Residual Maturity</th>
											<th style="white-space: nowrap;">Maturity Date</th>
											<th style="white-space: nowrap;">CCF (%)</th>
										</tr>
									</thead>
        <tbody >
            <tr th:each="lists : ${listall}" style="cursor: pointer;">
                <td style="text-align: center" th:text="${#dates.format(lists.reportDate, 'dd-MM-yyyy')}"></td>
                <td  th:text="${lists.dealId}"></td>
                <td  th:text="${lists.amount1}"></td>
                <td  th:text="${lists.amount2}"></td>
                <td  th:text="${lists.rateOrPrice}"></td>
                <td  th:text="${lists.security}"></td>
                <td style="text-align: center" th:text="${#dates.format(lists.tradeDate, 'dd-MM-yyyy')}"></td>
                <td style="text-align: center" th:text="${#dates.format(lists.valueDate, 'dd-MM-yyyy')}"></td>
                <td  th:text="${lists.counterpartyCode}"></td>
                
                
                
                <td  th:text="${lists.counterpartyName}"></td>
                <td  th:text="${lists.amount}" style="text-align: right"></td>
                <td th:text="${lists.residualMaturity}"></td>
                <td style="text-align: center" th:text="${#dates.format(lists.maturityDate, 'dd-MM-yyyy')}"></td>
                <td th:text="${lists.ccf}"></td>
                
            </tr>
        </tbody>
    </table>
</div>

					<!--<div class="card-footer text-center"
						>
						<button type="button" class="custom-tab-btn" id="btnHome"
							onclick="home();">Home</button>
						<button type="button" class="custom-tab-btn" id="btnBack"
							onclick="back();">Back</button>
					</div>-->
				</div>
			</div>
			</div>
		</div>
		
	
	
	

	
	<div class="modal fade" id="alert">
		<div
			class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
			<div class="modal-content">
			<div class="menu-title-header">
					<div class="modal-title" id="exampleModalLabel"
						style="text-align: center; color: white;">BANK OF BARODA</div>
				</div>
				<div class="modal-body" style="text-align: center">
					<p id="alertmsg"></p>
					<button type="button" class="custom-tab-btn" onclick="list()"
						data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>
	

			<div id="bob-loader" class="bob-loader" aria-hidden="true" role="status" aria-label="Loading">
	  <div class="bob-loader-card">
	    <img th:src="@{/images/bobn.png}" alt="Bank of Baroda" class="logo-imgs">
	    <div class="flow-bar">
	      <div class="flow-line"></div>
	    </div>
	  </div>
	</div>

	</div>
</div>


			
				<!-- Floating Back Button -->
<button id="floatingBackBtn" onclick="goBack()" title="Go Back">
	<i class="fa fa-arrow-left"></i>
</button>
<!-- Floating Forward Button -->
<button id="floatingForwardBtn" onclick="goForward()" title="Go Forward">
    <i class="fa fa-arrow-right"></i>
</button>
<div class="modal fade" id="alert1">
		<div
			class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
			<div class="modal-content">
			<div class="menu-title-header">
					<div class="modal-title" id="exampleModalLabel"
						style="text-align: center; color: white;background-color: #007bff;">BANK OF BARODA</div>
				</div>
				<div class="modal-body" style="text-align: center">
					<p id="alertmsg1"></p>
					<button type="button" class="custom-tab-btn"onclick="replace()"
						data-dismiss="modal">Replace</button>
						<button type="button" class="custom-tab-btn"  data-dismiss="modal"  onclick="ignore();">Ignore</button>

				</div>
			</div>
		</div>
	</div>
</body>
</html>