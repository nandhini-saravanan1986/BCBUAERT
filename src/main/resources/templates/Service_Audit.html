<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" href="/webjars/bootstrap/4.3.1/css/bootstrap.min.css"
		th:href="@{/webjars/bootstrap/4.3.1/css/bootstrap.min.css}">
	<link rel="stylesheet" type="text/css" href="/webjars/font-awesome/5.9.0/css/all.min.css"
		th:href="@{/webjars/font-awesome/5.9.0/css/all.min.css}">
	<link rel="stylesheet" type="text/css" href="/webjars/jquery-ui/1.12.1/jquery-ui.min.css"
		th:href="@{/webjars/jquery-ui/1.12.1/jquery-ui.min.css}">
	<link rel="stylesheet" type="text/css" href="/webjars/datatables/1.10.19/css/jquery.dataTables.min.css"
		th:href="@{/webjars/datatables/1.10.19/css/jquery.dataTables.min.css}">
	<link rel="shortcut icon" th:href="@{/favicon.ico}" type="image/x-icon">
	<link rel="icon" th:href="@{/favicon.ico}" type="image/x-icon">
	<link rel="stylesheet" th:href="@{/css/CustomButton.css}" />

	<script src="/webjars/bootstrap/4.3.1/js/bootstrap.min.js"
		th:src="@{/webjars/bootstrap/4.3.1/js/bootstrap.min.js}"></script>
	<script src="/webjars/popper.js/1.14.7/umd/popper.min.js"
		th:src="@{/webjars/popper.js/1.14.7/umd/popper.min.js}"></script>
	<script src="/webjars/jquery/3.4.1/jquery.min.js" th:src="@{/webjars/jquery/3.4.1/jquery.min.js}"></script>
	<script src="/webjars/jquery-ui/1.12.1/jquery-ui.min.js"
		th:src="@{/webjars/jquery-ui/1.12.1/jquery-ui.min.js}"></script>

	<script src="/webjars/jquery-form/4.2.2/jquery.form.min.js"
		th:src="@{/webjars/jquery-form/4.2.2/jquery.form.min.js}"></script>

	<script src="/webjars/jquery-validation/1.19.0/jquery.validate.min.js"
		th:src="@{/webjars/jquery-validation/1.19.0/jquery.validate.min.js}"></script>

	<script src="/webjars/datatables/1.10.19/js/jquery.dataTables.min.js"
		th:src="@{/webjars/datatables/1.10.19/js/jquery.dataTables.min.js}"></script>
	<script src="/webjars/datatables/1.10.19/js/dataTables.bootstrap4.min.js"
		th:src="@{/webjars/datatables/1.10.19/js/dataTables.bootstrap4.min.js}"></script>
	
	<style>

			.modal-backdrop {
					  position: fixed;
					  top: 0;
					  left: 0;
					  width: 120vw !important;              /* ðŸ‘ˆ a bit wider than viewport */
					  height: 120vh  !important;         /* ðŸ‘ˆ a bit taller than viewport */
					  background-color: #000;    /* ðŸ‘ˆ solid black base */
					  opacity: 0.7 !important;   /* ðŸ‘ˆ slightly darker overlay */
					  z-index: 1062;             /* ðŸ‘ˆ ensures it sits below modal but above everything else */
					}
					
				:root {
				  --bob-orange: #0073e6;
				  --bob-blue: #004080;
				  --overlay-bg: rgba(255, 255, 255, 0.9);
				}

				/* Full-screen overlay */
				.bob-loader {
				  position: fixed;
				  inset: 0;
				  display: flex;
				  align-items: center;
				  justify-content: center;
				  background: rgba(226, 232, 237, 0.6); /* lighter background */
				  backdrop-filter: blur(8px); /* âœ… background blur */
				  -webkit-backdrop-filter: blur(8px); /* Safari support */
				  z-index: 9999;
				  transition: opacity 0.25s ease, visibility 0.25s;
				  opacity: 1;
				  visibility: visible;
				}

				/* Hide when not active */
				.bob-loader[aria-hidden="true"] {
				  opacity: 0;
				  visibility: hidden;
				  pointer-events: none;
				}

				/* Loader card */
				.bob-loader-card {
				  display: flex;
				  flex-direction: column;
				  align-items: center;
				}

				/* Static logo */
				.logo-imgs {
				  height: 90px;
				  object-fit: contain;
				  display: block;
				}

				/* Flowing bar below logo */
				.flow-bar {
				  position: relative;
				  width: 200px; /* âœ… increased width */
				  height: 8px;  /* slightly thicker for better visibility */
				  background: #f1f1f1;
				  border-radius: 4px;
				  overflow: hidden;
				  margin-top: 10px;
				}

				.flow-line {
				  position: absolute;
				  left: -40%;
				  top: 0;
				  width: 40%;
				  height: 100%;
				  background: linear-gradient(90deg, var(--bob-orange), var(--bob-blue));
				  border-radius: 4px;
				  animation: flowMove 1.2s linear infinite;
				}

				/* Animation for flowing line */
				@keyframes flowMove {
				  0% {
				    left: -40%;
				  }
				  100% {
				    left: 100%;
				  }
				}


			</style>
			
			
		<style>
		
		
			
								body {
		    font-family: 'Segoe UI', Arial, sans-serif;
		    font-size: 14px;}
			
			
			
			.table .thead-light th {
		    color: #495057;
		    background-color: #e9ecef;
		    border-color: #dee2e6;
		font-family: sans-serif;
			
		}
		.dataTables_filter label {
			display: flex !important;
			align-items: center;
			gap: 8px;
			/* space between text and input */
			margin-bottom: 0 !important;
		}

		.dataTables_filter input {
			margin-left: 5px;
			flex: 1;
		}

		/* === ROLE PAGE CUSTOM HEADER === */
		.role-page-header {
			background-color: #ffffff;
			padding: 15px 20px;
			display: flex;
			/* Added for alignment */
			justify-content: space-between;
			/* Added for alignment */
			align-items: center;
			/* Added for alignment */
		}

		.role-page-title h4 {
			color: #003366;
			font-family: "Segoe UI", Arial, sans-serif;
			font-size: 20px;
			font-weight: 700;
			margin: 0;
		}

		.role-page-underline {
			width: 127px;
			height: 3px;
			background-color: #0073e6;
			border-radius: 2px;
			margin-top: 6px;
			box-shadow: 0 4px 12px rgba(0, 115, 230, 0.6);
			/* soft glow below */
		}


		/* Add Button Styling */
		.role-add-btn {
			background: linear-gradient(135deg, #005fa3, #007bff);
			color: #fff;
			border: none;
			border-radius: 25px;
			padding: 8px 18px;
			font-size: 13px;
			font-weight: 600;
			cursor: pointer;
			box-shadow: 0 2px 5px rgba(0, 64, 128, 0.2);
			transition: all 0.3s ease;
		}

		.role-add-btn:hover {
			background: linear-gradient(135deg, #007bff, #3399ff);
			transform: translateY(-2px);
			box-shadow: 0 0 10px rgba(0, 102, 204, 0.4);
		}

		.role-add-btn i {
			margin-right: 5px;
		}
	</style>

	<style>
		/* Red border for invalid inputs */
		input.error,
		select.error {
			border: 2px solid red !important;
		}

		/* Error message style */
		label.error {
			color: red;
			font-size: 0.85em;
			margin-top: 5px;
			display: block;
		}

		.underline {
			text-decoration: underline;
			color: #08a6f1;
			cursor: pointer;
		}

		.left-arrow-circle {
			width: 35px;
			height: 35px;
			border-radius: 50%;
			background-color: white;
			display: flex;
			align-items: center;
			justify-content: center;
			margin-right: 10px;
			transition: background-color 0.3s, transform 0.2s;
		}

		.left-arrow-circle i {
			color: rgb(107, 122, 143);
		}

		.left-arrow-circle:hover {
			background-color: rgb(107, 122, 143);
			cursor: pointer;
			transform: scale(1.05);
			border: 2px solid white;
		}

		.left-arrow-circle:hover i {
			color: white;
		}

		.white-text span {
			color: white !important;


		}
	</style>
	<style>
		/* Shared styles for both buttons */
		#floatingBackBtn,
		#floatingForwardBtn {
			position: fixed;
			top: 50%;
			background-color: #0073e6;
			border: none;
			color: white;
			font-size: 20px;
			border-radius: 50%;
			width: 45px;
			height: 45px;
			display: flex;
			align-items: center;
			justify-content: center;
			opacity: 0;
			pointer-events: none;
			transition: all 0.4s ease;
			box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
			z-index: 999;
		}

		/* Back button */
		#floatingBackBtn {
			left: -50px;
			/* hidden off-screen */
		}

		/* Forward button */
		#floatingForwardBtn {
			right: -50px;
			/* hidden off-screen */
		}

		/* Show when near edge */
		#floatingBackBtn.show {
			left: 20px;
			opacity: 1;
			pointer-events: auto;
		}

		#floatingForwardBtn.show {
			right: 20px;
			opacity: 1;
			pointer-events: auto;
		}

		/* Hover animation */
		#floatingBackBtn:hover,
		#floatingForwardBtn:hover {
			background-color: #005bb5;
			transform: scale(1.1);
		}
	</style>
	<style>
		.btns {
			float: right;
			margin: 5px;
		}

		.page-item.active .page-link {
			z-index: 1;
			color: #fff;
			background-color: #007bff;
			border-color: #007bff;
		}

		.col-sm-5 {
			padding-bottom: 15px;
		}

		.list-body {
			padding: 0px;
		}

		.error {
			color: red;
			padding-left: 10px;
		}

		.formline {
			padding-bottom: 15px;
			display: flex;
			/* Ensure flex for alignment */
			align-items: center;
			/* Vertically align items */
		}

		.formline>.col-sm-2,
		.formline>.col-sm-3 {
			display: flex;
			/* Make columns flex containers */
			align-items: center;
			/* Vertically align content within columns */
		}

		.formline>.col-sm-2 {
			justify-content: flex-end;
			/* Right-align labels */
			text-align: right;
			padding-right: 15px;
			/* Space between label and input */
		}

		.formline>.col-sm-3 {
			padding-left: 0px;
			/* Remove extra padding if needed */
		}

		.btn-primary {
			background-color: #E77400;
			border-color: #0c0c0c;
		}

		.btn-primary:not(:disabled):not(.disabled).active,
		.btn-primary:not(:disabled):not(.disabled):active,
		.show>.btn-primary.dropdown-toggle {
			color: #fff;
			background-color: #cc000000;
			border-color: #161617;
		}

		#finusertb {
			width: 460px;
		}

		.dataTables_wrapper .dataTables_paginate .paginate_button {
			padding: 0px;
		}

		/* Added for overall layout consistency */
		.container-fluid {
			width: 100%;
			padding-top: 1px;
			padding-right: 15px !important;
			/* Adjusted for better content spacing */
			padding-left: 15px !important;
			/* Adjusted for better content spacing */
			margin-right: auto;
			margin-left: auto;
		}

		.card {
			border: 1px solid #e0e0e0;
			border-radius: 8px;
			box-shadow: 0 2px 10px rgba(0, 0, 0, .05);
		}

		.card-header {
			background-color: #f8f9fa;
			border-bottom: 1px solid #e0e0e0;
			padding: 15px 20px;
			display: flex;
			/* Added for alignment */
			justify-content: space-between;
			/* Added for alignment */
			align-items: center;
			/* Added for alignment */
		}

		.card-body {
			padding: 20px;
		}

		.card-footer {
			background-color: #f8f9fa;
			border-top: 1px solid #e0e0e0;
			padding: 15px 20px;
		}

		.form-control-sm {
			height: calc(1.8125rem + 2px);
			/* Adjusted for better appearance */
			padding: .25rem .5rem;
			font-size: .875rem;
			line-height: 1.5;
			border-radius: .2rem;
		}

		/* Custom Tab Button Style */
		.custom-tab-btn {
			background-color: #007bff;
			color: white;
			border: none;
			padding: 8px 15px;
			margin-left: 8px;
			border-radius: 5px;
			cursor: pointer;
			transition: background-color 0.3s ease;
			font-size: 14px !important;
			/* Ensure consistent font size */
		}

		.custom-tab-btn:hover {
			background-color: #0056b3;
		}
	</style>

<script>
		$(document).ready(function () {
			// Initialize DataTable
			var table = $('#audttable').DataTable({
				scrollX: true,
				scrollY: "430px",
				scrollCollapse: true,
				autoWidth: false,
				paging: true,
				searching: true,
				lengthChange: false,
				ordering: false,
				pageLength: 10,

				// Search (left) + Pagination (right)
				dom: '<"d-flex justify-content-between align-items-center mb-2"f p>t'
			});

			// âœ… Move "Search:" text above the box â€” simple reliable fix
			const filter = $('#usertable_filter label');
			const input = filter.find('input');

			// replace label content: Search above input
			filter.html('<div style="display:block; font-weight:600; margin-bottom:3px;">Search:</div>');
			filter.append(input);
		});
		
		// Detect mouse near screen edges
										document.addEventListener('mousemove', function(e) {
										    const backBtn = document.getElementById('floatingBackBtn');
										    const forwardBtn = document.getElementById('floatingForwardBtn');
										    const screenWidth = window.innerWidth;

										    // Left edge (back)
										    if (e.clientX < 50) {
										        backBtn.classList.add('show');
										    } else {
										        backBtn.classList.remove('show');
										    }

										    // Right edge (forward)
										    if (screenWidth - e.clientX < 50) {
										        forwardBtn.classList.add('show');
										    } else {
										        forwardBtn.classList.remove('show');
										    }
										});
	</script>


</head>
<title>RiskInsights - Service Audit</title>

<body>
	<div>
		<div class="row">
			<div th:insert="XBRLHeaderMenu :: header"></div>
			<div class="col-sm-12">

				<div class="card">
				
					<div class="role-page-header">
				
						<div class="role-page-title">
							<h4>Service Audit</h4>
							<div class="role-page-underline"></div>
						</div>
				
				
						<div class="btn-group">
							<div class="d-flex align-items-center">
								<label for="searchDate" class="mb-0 mr-2">Date:</label>
								<input type="date" id="searchDate" class="form-control form-control-sm" />
							</div>
						</div>
					</div>
					<br>
				
					<div class="table-container">
						<table class="table table-bordered table-striped table-hover fs-6" id="audttable">
							<thead class="table-success">
								<tr>
									<th>Ref No.</th>
									<th>Table Name</th>
									<th style="width: 11%;">Function Name</th>
									<th>Old Value</th>
									<th>New Value</th>
									<th style="width: 10%;">Modify User</th>
									<th style="width: 10%;">Modify Date</th>
								</tr>
							</thead>
							<tbody>
								<tr th:each="auditdata : ${AuditList}" class="userlist">
									<td th:text="${auditdata.audit_ref_no}"></td>
									<td th:text="${auditdata.audit_table}"></td>
									<td th:text="${auditdata.audit_screen}"></td>
									<td th:text="${auditdata.old_value}"></td>
									<td th:text="${auditdata.new_value}"></td>
									<td th:text="${auditdata.entry_user}"></td>
									<td
										th:text="${auditdata.entry_time != null ? #dates.format(auditdata.entry_time, 'dd-MM-yyyy') : ''}">
									</td>
				
								</tr>
				
							</tbody>
						</table>
					</div>
				
				</div>
			</div>
		</div>
	</div>
	
	<div class="modal fade" id="alert">
		<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
			<div class="modal-content">
				<div class="modal-body" style="text-align: center">
					<p id="alertmsg"></p>
					<button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>
	
	<button id="floatingBackBtn" onclick="goBack()" title="Go Back">
						<i class="fa fa-arrow-left"></i>
					</button>
					<!-- Floating Forward Button -->
					<button id="floatingForwardBtn" onclick="goForward()" title="Go Forward">
						<i class="fa fa-arrow-right"></i>
					</button>
</body>

</html>