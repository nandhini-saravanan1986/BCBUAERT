<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">

<!-- 
CREATED BY	: SUJIDHARSHINI V
CREATED ON	: 04.06.2025
PURPOSE		: Trade Level Data Derivative Simplified Report
-->

<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- CSS -->
<link rel="stylesheet" type="text/css"
	th:href="@{/webjars/bootstrap/4.3.1/css/bootstrap.min.css}">
<link rel="stylesheet" type="text/css"
	th:href="@{/webjars/font-awesome/5.9.0/css/all.min.css}">
<link rel="stylesheet" type="text/css"
	th:href="@{/webjars/jquery-ui/1.12.1/jquery-ui.min.css}">
<link rel="stylesheet" type="text/css"
	th:href="@{/webjars/datatables/1.10.19/css/jquery.dataTables.min.css}">
<link rel="stylesheet" th:href="@{/css/CustomButton.css}" />
<link rel="icon" th:href="@{/favicon.ico}" type="image/x-icon" />

<!-- JavaScript -->
<!-- jQuery core (required first) -->


<!-- âœ… Your manually placed jQuery validation
	<script th:src="@{/webjars/jquery/3.4.1/jquery.min.js}"></script>
	 <script th:src="/jquery/jquery.validate.min.js"></script>
	 -->

<!-- jQuery (required first) -->
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<!-- âœ… jQuery Validation -->
<script src="/webjars/jquery-validation/1.19.0/jquery.validate.min.js"
	th:src="@{/webjars/jquery-validation/1.19.0/jquery.validate.min.js}"></script>

<!-- Bootstrap + Others -->
<script th:src="@{/webjars/popper.js/1.14.7/umd/popper.min.js}"></script>
<script th:src="@{/webjars/bootstrap/4.3.1/js/bootstrap.min.js}"></script>
<script th:src="@{/webjars/jquery-ui/1.12.1/jquery-ui.min.js}"></script>
<script th:src="@{/webjars/jquery-form/4.2.2/jquery.form.min.js}"></script>
<script
	th:src="@{/webjars/datatables/1.10.19/js/jquery.dataTables.min.js}"></script>
<script
	th:src="@{/webjars/datatables/1.10.19/js/dataTables.bootstrap4.min.js}"></script>


<style>
body {
	font-family: 'Segoe UI', Arial, sans-serif;
	font-size: 14px;
}

.table .thead-light th {
	color: #495057;
	background-color: #e9ecef;
	border-color: #dee2e6;
	font-family: sans-serif;
}

.modal-backdrop {
	position: fixed;
	top: 0;
	left: 0;
	width: 120vw !important; /* ðŸ‘ˆ a bit wider than viewport */
	height: 120vh !important; /* ðŸ‘ˆ a bit taller than viewport */
	background-color: #000; /* ðŸ‘ˆ solid black base */
	opacity: 0.7 !important; /* ðŸ‘ˆ slightly darker overlay */
	z-index: 1062;
	/* ðŸ‘ˆ ensures it sits below modal but above everything else */
}

/* === ROLE PAGE CUSTOM HEADER === */
.role-page-header {
	background-color: #ffffff;
	padding: 15px 20px;
}

.role-page-title h4 {
	color: #003366;
	font-family: "Segoe UI", Arial, sans-serif;
	font-size: 20px;
	font-weight: 700;
	margin: 0;
}

.role-page-underline {
	width: 158px;
	height: 3px;
	background-color: #0073e6;
	border-radius: 2px;
	margin-top: 6px;
	box-shadow: 0 4px 12px rgba(0, 115, 230, 0.6); /* soft glow below */
}

/* Add Button Styling */
/* Base Button Style */
.role-add-btn {
	background: #ffffff; /* default white background */
	color: #005fa3; /* blue text */
	border: 2px solid #005fa3;
	border-radius: 25px;
	padding: 8px 18px;
	font-size: 13px;
	font-weight: 600;
	cursor: pointer;
	box-shadow: 0 2px 5px rgba(0, 64, 128, 0.1);
	transition: all 0.3s ease;
}

/* Hover effect */
.role-add-btn:hover {
	background: linear-gradient(135deg, #005fa3, #007bff);
	color: #fff;
	transform: translateY(-2px);
	box-shadow: 0 0 10px rgba(0, 102, 204, 0.4);
}

/* Active (clicked or selected) button */
.role-add-btn.active {
	background: linear-gradient(135deg, #005fa3, #007bff);
	color: #fff;
	border: none;
	box-shadow: 0 2px 8px rgba(0, 64, 128, 0.3);
	transform: translateY(-1px);
}

/* Optional: icon spacing */
.role-add-btn i {
	margin-right: 5px;
}
</style>

<style>
:root {
	--bob-orange: #0073e6;
	--bob-blue: #004080;
	--overlay-bg: rgba(255, 255, 255, 0.9);
}

/* Full-screen overlay */
.bob-loader {
	position: fixed;
	inset: 0;
	display: flex;
	align-items: center;
	justify-content: center;
	background: rgba(226, 232, 237, 0.6); /* lighter background */
	backdrop-filter: blur(8px); /* âœ… background blur */
	-webkit-backdrop-filter: blur(8px); /* Safari support */
	z-index: 9999;
	transition: opacity 0.25s ease, visibility 0.25s;
	opacity: 1;
	visibility: visible;
}

/* Hide when not active */
.bob-loader[aria-hidden="true"] {
	opacity: 0;
	visibility: hidden;
	pointer-events: none;
}

/* Loader card */
.bob-loader-card {
	display: flex;
	flex-direction: column;
	align-items: center;
}

/* Static logo */
.logo-imgs {
	height: 90px;
	object-fit: contain;
	display: block;
}

/* Flowing bar below logo */
.flow-bar {
	position: relative;
	width: 200px; /* âœ… increased width */
	height: 8px; /* slightly thicker for better visibility */
	background: #f1f1f1;
	border-radius: 4px;
	overflow: hidden;
	margin-top: 10px;
}

.flow-line {
	position: absolute;
	left: -40%;
	top: 0;
	width: 40%;
	height: 100%;
	background: linear-gradient(90deg, var(--bob-orange), var(--bob-blue));
	border-radius: 4px;
	animation: flowMove 1.2s linear infinite;
}

/* Animation for flowing line */
@keyframes flowMove { 0% {
	left: -40%;
}
100%
{
left
:
100%;
}
}
</style>

<script>
							function goBack() {
								document.getElementById("bob-loader").setAttribute("aria-hidden", "false");
							    window.history.back();
							}

							function goForward() {
								document.getElementById("bob-loader").setAttribute("aria-hidden", "false");
							    window.history.forward();
							}

							// Detect mouse near screen edges
							document.addEventListener('mousemove', function(e) {
							    const backBtn = document.getElementById('floatingBackBtn');
							    const forwardBtn = document.getElementById('floatingForwardBtn');
							    const screenWidth = window.innerWidth;

							    // Left edge (back)
							    if (e.clientX < 50) {
							        backBtn.classList.add('show');
							    } else {
							        backBtn.classList.remove('show');
							    }

							    // Right edge (forward)
							    if (screenWidth - e.clientX < 50) {
							        forwardBtn.classList.add('show');
							    } else {
							        forwardBtn.classList.remove('show');
							    }
							});
							</script>

<style>
/* Shared styles for both buttons */
#floatingBackBtn, #floatingForwardBtn {
	position: fixed;
	top: 50%;
	background-color: #0073e6;
	border: none;
	color: white;
	font-size: 20px;
	border-radius: 50%;
	width: 45px;
	height: 45px;
	display: flex;
	align-items: center;
	justify-content: center;
	opacity: 0;
	pointer-events: none;
	transition: all 0.4s ease;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
	z-index: 999;
}

/* Back button */
#floatingBackBtn {
	left: -50px; /* hidden off-screen */
}

/* Forward button */
#floatingForwardBtn {
	right: -50px; /* hidden off-screen */
}

/* Show when near edge */
#floatingBackBtn.show {
	left: 20px;
	opacity: 1;
	pointer-events: auto;
}

#floatingForwardBtn.show {
	right: 20px;
	opacity: 1;
	pointer-events: auto;
}

/* Hover animation */
#floatingBackBtn:hover, #floatingForwardBtn:hover {
	background-color: #005bb5;
	transform: scale(1.1);
}
</style>








<style>
.btns {
	float: right;
	margin: 5px;
}

.col-sm-5 {
	padding-bottom: 15px;
}

.list-body {
	padding: 0px;
}

.error {
	color: red;
	padding-left: 10px;
}

.formline {
	padding-bottom: 15px;
}

.btn-primary {
	background-color: #E77400;
	border-color: #0c0c0c;
}

.btn-primary:not(:disabled ):not(.disabled ).active, .btn-primary:not(:disabled ):not(.disabled ):active,
	.show>.btn-primary.dropdown-toggle {
	color: #fff;
	background-color: #cc000000;
	border-color: #161617;
}

#finusertb {
	width: 460px;
}

.dataTables_wrapper .dataTables_paginate .paginate_button {
	padding: 0px;
}
</style>




<style>
.card {
	box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
	border-radius: 8px;
}

.card-header h5 {
	font-size: 22px;
	color: #fff;
	font-weight: 600;
}

.nav-tabs .nav-link {
	font-weight: 500;
	border: 1px solid #dee2e6;
	border-bottom: none;
	border-radius: 4px 4px 0 0;
	background-color: #f1f1f1;
	margin-right: 5px;
}

.nav-tabs .nav-link.active {
	background-color: #ffffff;
	border-color: #dee2e6 #dee2e6 #ffffff;
}

.table-responsive {
	border: 1px solid #dee2e6;
	border-radius: 4px;
}

.table-hover tbody tr:hover {
	background-color: #f3f6f9;
}

thead th {
	position: sticky;
	top: 0;
	background-color: #e9ecf0;
	z-index: 1;
}

.card-footer {
	padding: 10px;
	border-top: 1px solid #ccc;
}

.btn-xs {
	padding: 4px 12px;
	font-size: 14px;
	border-radius: 4px;
}

/* #usertable th, #usertable td {
	vertical-align: middle;
	text-align: left;
	font-size: 17px;
	font-family: Verdana, sans-serif;
} */
.fa-edit:hover {
	color: #28a745;
	transform: scale(1.1);
}

td {
	border: 1px solid rgb(0, 164, 166);
	overflow: hidden;
	white-space: nowrap;
	text-overflow: ellipsis;
}
</style>


<style>
.form-group {
	position: relative;
	margin-bottom: 1.5rem;
}

.form-control {
	width: 100%;
	border: 2px solid #ccc;
	border-radius: 8px;
	font-size: 1rem;
	outline: none;
	background: transparent;
	transition: border-color 0.3s ease, padding-top 0.3s ease;
}

.error {
	color: red;
	padding-top: 15px;
}

.form-control:focus {
	border-color: #007bff;
}

.form-legend {
	position: absolute;
	top: 50%;
	left: 15px;
	transform: translateY(-50%);
	font-size: 1rem;
	color: #aaa;
	background: white;
	padding: 0 5px;
	pointer-events: none;
	transition: 0.3s ease;
}

/* When input or select is focused or has a value, move the label up */
.form-control:focus ~ .form-legend, .form-control:not(:placeholder-shown) 
	 ~ .form-legend {
	top: -8px;
	font-size: 1rem;
	color: #007bff;
}

/* Hover effect when the input/select is focused */
.form-control:focus:hover ~ .form-legend {
	color: #0056b3; /* Darker shade of blue on hover */
}

/* Ensure the label returns to the normal color after focus or hover is removed */
.form-control:not(:focus) ~ .form-legend {
	color: #aaa; /* Normal label color */
}
</style>

<style>
/* Red border for invalid inputs */
input.error, select.error {
	border: 2px solid red !important;
}

/* Error message style */
label.error {
	color: red;
	font-size: 0.85em;
	margin-top: 5px;
	display: block;
}
</style>
<script th:inline="javascript">
	

	function home() {
		document.getElementById("bob-loader").setAttribute("aria-hidden", "false");
		location.href = 'Dashboard'
	}

	function back() {
		document.getElementById("bob-loader").setAttribute("aria-hidden", "false");

		window.history.back();
	}

	function list() {
		document.getElementById("bob-loader").setAttribute("aria-hidden", "false");
		location.href = 'Trade_Level_Data_Derivatives_Simplified?formmode=list';
	}

	
	$(document).ready(function () {
	    // On modal close, redirect to your controller method path
	    $('#alert').on('hidden.bs.modal', function () {
	        window.location.href = './Trade_Level_Data_Derivatives_Simplified';
	    });
	});
	
	function fxrisk() {
		location.href = 'Trade_Level_Data_Derivatives_Simplified';
	}
	$(document).ready(function () {
	    // On modal close, redirect to your controller method path
	    $('#alert').on('hidden.bs.modal', function () {
	        window.location.href = './Trade_Level_Data_Derivatives_Simplified';
	    });
	});
	
	

	function submitForm1() {
		document.getElementById("bob-loader").setAttribute("aria-hidden", "false");
		$('#nostroForm').validate({
	        messages: {
	            portfolioDate: "Please provide Portfolio Date",
	            submittingInstitution: "Please provide Submitting Institution"
	        }
	    });

	    if ($("#nostroForm").valid()) {
	    	var formmode = /*[[${formmode}]]*/null;

	    	var report_name = 'CBUAE_Nostro Account_Balance_Data_Template';
	    	document.getElementById("bob-loader").setAttribute("aria-hidden", "false");

	        var url = "./createNostroData?report_name=" + report_name;

	        $("#nostroForm").attr('action', url);

	        var options = {
	            success: showResponse,
	            error: function (xhr, status, error) {
	                console.log("Error occurred: ", error);
	                console.log(xhr.responseText); // for debugging
					document.getElementById("bob-loader").setAttribute("aria-hidden", "true");    
	                $("#alertmsg").text("Something went wrong while submitting the form.");
	                $('#alert').modal("toggle");
	            }
	        };

	        $("#nostroForm").ajaxSubmit(options);

	        function showResponse(responseText, statusText, xhr, $form) {
				document.getElementById("bob-loader").setAttribute("aria-hidden", "true");    
	            $("#alertmsg").text(responseText);
	            $('#alert').modal("toggle");
	        }
	    }
	};
	
	
	function updateform(event) {
    event.preventDefault();
    
    console.log("updateform function called");

    // Show loader
	document.getElementById("bob-loader").setAttribute("aria-hidden", "false");

    // Check if SI_NO is present before sending
    var formData = $('#TradelevelDataderivative').serialize(); // Make sure this ID is correct (capital F)

    console.log("Serialized Data:", formData); // Debug

    $.ajax({
        url: './updatetradeleveldataderivativesimplified',
        type: 'POST',
        data: formData,
        success: function(response) {
            console.log("Server response:", response);
			document.getElementById("bob-loader").setAttribute("aria-hidden", "true");    

            $("#alertmsg").text(response);
            $("#alert").modal("toggle");

            if (response.includes("successful")) {
                setTimeout(function() {
                    window.location.href = "./Trade_Level_Data_Derivatives_Simplified?formmode=list";
                }, 1500);
            }
        },
        error: function(xhr, status, error) {
            console.error("Error in modify:", error);
			document.getElementById("bob-loader").setAttribute("aria-hidden", "true");    
            $("#alertmsg").text("Error: " + error);
            $("#alert").modal("show");
        }
    });
}

	</script>

<script>
		$(document).ready(function () {
			$("#tradelevelsimplifiedForm").validate({
				errorClass: "error", // use 'error' class for styling
				errorElement: "label", // wrap error messages in <label>

				// Place the error after the input field
				errorPlacement: function (error, element) {
					if (element.parent('.form-group').length) {
						error.insertAfter(element); // default
					} else {
						error.insertAfter(element);
					}
				},

				// Highlight and unhighlight fields
				highlight: function (element) {
					$(element).addClass("error");
				},
				unhighlight: function (element) {
					$(element).removeClass("error");
				},

				// On successful validation, run this
				submitHandler: function (form) {
					submitForm(); // your custom submit function
				}
			});
		});
	</script>

</head>


<script>
  function navigateToTab(tabId) {
	  document.getElementById("bob-loader").setAttribute("aria-hidden", "false");
if (tabId === 'data') {
			window.location.href = 'Trade_Level_Data_Derivatives_Simplified?formmode=list';
					//$("#loader").modal("hide");
  } else if (tabId === 'datacontrols') {
      window.location.href = 'Trade_Level_Data_Derivatives_Simplified?formmode=add';
      		//$("#loader").modal("hide");
 }
  }

  function handleClick(tabId) {
    // Remove active class from all buttons
    document.querySelectorAll('.role-add-btn').forEach(btn => btn.classList.remove('active'));
    document.getElementById(tabId + '-btn').classList.add('active');

    // Hide all panes
    document.querySelectorAll('.tab-pane').forEach(pane => pane.classList.remove('show', 'active'));
    document.getElementById(tabId).classList.add('show', 'active');
  }

  // On page load, detect formmode and show corresponding tab
  window.addEventListener('DOMContentLoaded', function () {
    const params = new URLSearchParams(window.location.search);
    const formmode = params.get('formmode');

    if (formmode === 'list') {
      handleClick('data');
    } else {
      handleClick('datacontrols'); // default or formmode=add
    }
  });
</script>




<script>
    function downloadTradeleveldataderivativesimplified() {
        // 1. Show the loader modal
       document.getElementById("bob-loader").setAttribute("aria-hidden", "false");

        $.ajax({
            url: './downloadTradeleveldataderivativesimplifiedExcel',
            type: 'GET',
            xhrFields: {
                responseType: 'blob'
            },
            success: function (data) {
                // 2. Hide the loader modal
               	document.getElementById("bob-loader").setAttribute("aria-hidden", "true");    

                let message = '';

                if (data && data.size > 100) {
                    const blob = new Blob([data], { type: 'application/vnd.ms-excel' });
                    const url = window.URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.style.display = 'none';
                    a.href = url;
                    a.download = 'TradelevelDataDerivativesimplified.xls';
                    document.body.appendChild(a);

                    a.click();

                    window.URL.revokeObjectURL(url);
                    document.body.removeChild(a);

                    message = 'TradelevelDataDerivativeSimplified.xls has been downloaded successfully.';
                } else {
                    message = 'No data available to download.';
                }

                // Show result in unified alert modal
                $('#alertmsg').text(message);
                $('#alert').modal('show');
            },
            error: function (xhr, status, error) {
            	document.getElementById("bob-loader").setAttribute("aria-hidden", "true");    

                console.error("Download failed:", error);

                $('#alertmsg').text('An error occurred while downloading TradelevelDataDerivativeSimplified.xls.');
                $('#alert').modal('show');
            }
        });

        // Safety fallback in case AJAX hangs silently
        setTimeout(function () {
        	document.getElementById("bob-loader").setAttribute("aria-hidden", "true");    
        }, 10000);
    }
</script>

<script>

    function submitForm() {
    	document.getElementById("bob-loader").setAttribute("aria-hidden", "false");

        const reportName = 'CBUAE_Trade_Level_Data_Derivative_Simplified_Template';
        const submitUrl = './createDataControl?report_name=' + encodeURIComponent(reportName);
        const formData = $("#tradelevelsimplifiedForm").serialize();
	
        $.ajax({
            url: submitUrl,
            type: "POST",
            data: formData,
            success: function (response) {
            	document.getElementById("bob-loader").setAttribute("aria-hidden", "true");    

            	$("#alertmsg1").text(response);
                $("#alert1").modal("toggle");
                //location.href = 'Nostro_Account_Bal';
            },
            error: function (xhr, status, error) {
            	document.getElementById("bob-loader").setAttribute("aria-hidden", "true");    

                console.error("Error:", error);
                alert("Error occurred: " + error);
            }
        });
    }


</script>
<title>RiskInsights</title>
<body>
	<div class="container-fluid"
		style="padding-left: 0px; padding-right: 0px;">
		<!-- 	<div class="row"> -->

		<div th:insert="XBRLHeaderMenu :: header"></div>

		<div
			class="role-page-header d-flex justify-content-between align-items-center"
			th:if="${formmode == 'list' or formmode == 'add' or formmode =='null' }">
			<div class="float-left role-page-title">
				<h4>TRADE LEVEL DATA DERIVATVE SIMPLIFIED</h4>
				<div
					style="width: 407px; height: 3px; background-color: #0073e6; border-radius: 2px; margin-top: 6px; box-shadow: 0 4px 12px rgba(0, 115, 230, 0.6);"></div>
			</div>
		</div>


	</div>
	<!-- -------------------User List Starts----------------------------------------------------- -->
	<div style="padding-right: 10px; padding-left: 20px;"
		th:if="${formmode == 'list' or formmode == 'add' or formmode =='null' }">





		<!-- Tabs -->
		<div
			class="role-page-header d-flex justify-content-between align-items-center">
			<div class="float-left">
				<button class="role-add-btn" id="datacontrols-btn"
					onclick="navigateToTab('datacontrols')">Data Controls</button>
				<button class="role-add-btn" id="template-btn"
					onclick="handleClick('template')">Template Instructions</button>
				<button class="role-add-btn" id="data-btn"
					onclick="navigateToTab('data')">Data</button>

			</div>
			<div class="float-right" >
				<button th:if="${formmode} =='list'" type="button"
					class="role-add-btn"
					onclick="downloadTradeleveldataderivativesimplified();">
					<i class="fa fa-download"></i> Download
				</button>
			</div>
		</div>






		<div class="tab-content" id="myTabContent" style="margin-top: 15px;"
			th:if="${formmode} =='null'">
			<div class="tab-pane fade show active" id="datacontrols"
				role="tabpanel">

				<div class="row">
					<div class="col-sm-12 finuserapply">
						<form id="tradelevelsimplifiedForm" method="post"
							autocomplete="off">
							<div class="card-body"
								style="max-height: 450px; overflow-y: auto">


								<input autocomplete="false" name="hidden" type="text"
									style="display: none;">
								<div class="form-group" style="border: none">
									<div class="row formline">
										<div class="col-sm-1"></div>
										<div class="form-group col-md-4">
											<select id="submittingInstitution"
												name="submittingInstitution" class="form-control" required>
												<option value="">-- Select Institution --</option>
												<option value="Bank of Baroda">Bank of Baroda</option>
											</select> <label for="submittingInstitution" class="form-legend">Submitting
												Institution</label>
										</div>


										<div class="col-sm-1"></div>

										<div class="form-group col-md-4">
											<input type="date" id="portfolioDate" name="portfolioDate"
												class="form-control" placeholder=" " required /> <label
												for="portfolioDate" class="form-legend">Portfolio
												date</label>
										</div>
									</div>

									<!-- Contact Employee 1 Name / Title -->
									<!-- Contact Employee 1 Group -->
									<div class="form-group"
										style="border: 1px solid #e0e0e0; padding: 15px; margin-bottom: 20px; border-radius: 5px;">
										<div class="row formline">
											<div class="col-sm-12">
												<label style="font-weight: bold; color: #007B8A;">Contact
													Details(Employee 1)</label>
											</div>
										</div>
										<div class="row formline">
											<div class="form-group col-md-4">
												<input type="text" id="contactEmployee1Name1"
													name="contactEmployee1Name1" class="form-control"
													placeholder=" " required /> <label
													for="contactEmployee1Name1" class="form-legend">Name</label>
											</div>


											<div class="form-group col-md-4">
												<input type="text" id="contactEmployee1Title1"
													name="contactEmployee1Title1" class="form-control"
													placeholder=" " required /> <label
													for="contactEmployee1Title1" class="form-legend">Title</label>
											</div>



											<div class="form-group col-md-4">
												<input type="email" id="contactEmployee1Email1"
													name="contactEmployee1Email1" class="form-control"
													placeholder=" " required /> <label
													for="contactEmployee1Email1" class="form-legend">Email</label>
											</div>
											<div class="col-sm-3"></div>

										</div>
									</div>
									<div class="form-group"
										style="border: 1px solid #e0e0e0; padding: 15px; margin-bottom: 20px; border-radius: 5px;">
										<div class="row formline">
											<div class="col-sm-12">
												<label style="font-weight: bold; color: #007B8A;">Contact
													Details(Employee 2)</label>
											</div>
										</div>
										<div class="row formline">
											<div class="form-group col-md-4">
												<input type="text" id="contactEmployee2Name2"
													name="contactEmployee2Name2" class="form-control"
													placeholder=" " required /> <label
													for="contactEmployee2Name2" class="form-legend">Name</label>
											</div>


											<div class="form-group col-md-4">
												<input type="text" id="contactEmployee2Title2"
													name="contactEmployee2Title2" class="form-control"
													placeholder=" " required /> <label
													for="contactEmployee2Title2" class="form-legend">Title</label>
											</div>



											<div class="form-group col-md-4">
												<input type="email" id="contactEmployee2Email2"
													name="contactEmployee2Email2" class="form-control"
													placeholder=" " required /> <label
													for="contactEmployee2Email2" class="form-legend">Email</label>
											</div>
											<div class="col-sm-3"></div>

										</div>
										<!-- Contact Employee 2 Group -->
									</div>
									<div class="form-group"
										style="border: 1px solid #e0e0e0; padding: 15px; margin-bottom: 20px; border-radius: 5px;">
										<div class="row formline">
											<div class="col-sm-12">
												<label style="font-weight: bold; color: #007B8A;">Sign
													Off</label>
											</div>
										</div>

										<!-- Sign-off CRO Name / Email -->
										<div class="row formline">
											<div class="col-sm-1"></div>
											<div class="form-group col-md-4">
												<input type="text" id="signOffCroName" name="signOffCroName"
													class="form-control" placeholder=" " required /> <label
													for="signOffCroName" class="form-legend">CRO Name</label>
											</div>
											<div class="col-sm-1"></div>
											<div class="form-group col-md-4">
												<input type="email" id="signOffCroEmail"
													name="signOffCroEmail" class="form-control" placeholder=" "
													required /> <label for="signOffCroEmail"
													class="form-legend">CRO Email</label>
											</div>

										</div>

										<!-- Sign-off CFO Name / Email -->
										<div class="row formline">
											<div class="col-sm-1"></div>
											<div class="form-group col-md-4">
												<input type="text" id="signOffCfoName" name="signOffCfoName"
													class="form-control" placeholder=" " required /> <label
													for="signOffCfoName" class="form-legend">CFO Name</label>
											</div>

											<div class="col-sm-1"></div>
											<div class="form-group col-md-4">
												<input type="email" id="signOffCfoEmail"
													name="signOffCfoEmail" class="form-control" placeholder=" "
													required /> <label for="signOffCfoEmail"
													class="form-legend">CFO Email</label>
											</div>

										</div>

										<!-- Sign-off Head of Treasury Name / Email -->
										<div class="row formline">
											<div class="col-sm-1"></div>
											<div class="form-group col-md-4">
												<input type="text" id="signOffHeadOfTreasuryName"
													name="signOffHeadOfTreasuryName" class="form-control"
													placeholder=" " required /> <label
													for="signOffHeadOfTreasuryName" class="form-legend">Head
													of Treasury Name</label>
											</div>

											<div class="col-sm-1"></div>
											<div class="form-group col-md-4">
												<input type="email" id="signOffHeadOfTreasuryEmail"
													name="signOffHeadOfTreasuryEmail" class="form-control"
													placeholder=" " required /> <label
													for="signOffHeadOfTreasuryEmail" class="form-legend">Head
													of Treasury Email</label>
											</div>
										</div>
									</div>

								</div>
						</form>
					
				<div class="card-footer text-center"style="padding-bottom: 18px;">
					<!-- <button type="button" class="custom-tab-btn" onclick="home();">
						<i class="fa fa-home"></i> Home
					</button> -->


					<button th:if="${formmode == 'null' or formmode == 'add'}"
						type="button" class="role-add-btn" onclick="submitForm()">Save</button>

					<!-- 
					<button type="button" class="custom-tab-btn" onclick="back();">
						<i class="fa fa-arrow-left"></i> Back
					</button> -->
</div>
				</div>
				</div>
			</div>
		</div>

		<!-- --------------------------------------DATA CONTROL ENDS--------------------------------------------- -->

		<!-- --------------------------------------TEMPLATE STARTS--------------------------------------------- -->

		<div class="tab-pane fade" id="template" role="tabpanel"
			th:if="${formmode == 'null'}">
			<p>Templates tabs</p>
			<div class="card-footer text-center"
				style="background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(8px); padding: 10px; border-top: 2px solid #ccc;">
				<!-- <button type="button" class="role-add-btn" onclick="home();">
					<i class="fa fa-home"></i> Home
				</button> -->


				<!-- <button th:if="${formmode == 'null' or formmode == 'add'}"  type="button" class="custom-tab-btn"
                  onclick="submitForm()">Save</button>-->


				<!-- <button type="button" class="custom-tab-btn" onclick="back();">
					<i class="fa fa-arrow-left"></i> Back
				</button> -->

			</div>
		</div>

		<!-- --------------------------------------TEMPLATE ENDS--------------------------------------------- -->



		<!-- -----------------------------------DATA LIST STARTS -------------------------------------------- -->
		<div class="tab-pane fade" id="data" role="tabpanel">
			<!-- Move your existing table content here -->

			<!-- 	<div class="row">
				<div class="col-sm-12">
					<div class="container-fluid">
   -->




			<div class="table-responsive"
				style="max-height: 400px; overflow: auto; border: none;">
				<table id="usertable"
					class="table table-bordered table-striped table-hover"
					style="min-width: 2000px;">

					<thead class="thead-light">

						<tr>
							<th rowspan="1" style="text-align: center;"></th>
							<th colspan="8" style="text-align: center;">Financial
								Institution Information</th>
							<th colspan="2" style="text-align: center;">Counterparty
								Information</th>
							<th colspan="16" style="text-align: center;">Applicable to
								all instruments</th>
							<th colspan="26" style="text-align: center;">Applicable to
								Interest Rate Vanilla Swaps/Cross-Currency Swap/FX swap/FX
								Forward/Swaption</th>
							<th colspan="21" style="text-align: center;">Applicable to
								Total Return Swap/Asset_Swap</th>
							<th colspan="7" style="text-align: center;">Applicable to
								Credit Default Swap</th>
							<th colspan="8" style="text-align: center;">Applicable to
								Futures Contracts</th>
							<th colspan="15" style="text-align: center;">Applicable to
								Options</th>
							<th colspan="15" style="text-align: center;">Overall
								Portfolio</th>
						</tr>


						<tr>
							<th style="text-align: center;width: 100px;">Action</th>

							<th>Date</th>
							<th>Bank Name</th>
							<th>Head Office Subsidiary</th>
							<th>Subsidiary</th>
							<th>Bank Symbol</th>
							<th>Conventional/Islamic</th>
							<th>CBUAE Tiering</th>
							<th>CBUAE Tiering</th>
							<th>Cpty Name</th>
							<th>Internal Counterparty Reference</th>
							<th>Internal Transaction Reference</th>
							<th>Underlying asset class</th>
							<th>Derivatives Type</th>
							<th>Transaction Rationale</th>
							<th>Bundle Transaction</th>
							<th>Back-to-Back transaction</th>
							<th>Instruments Characteristics</th>
							<th>Currency Valuation</th>
							<th>AED FX Spot rate conversion</th>
							<th>Start Date</th>
							<th>Effective or Delivery Date (applicable to forward
								starting swap, future and swaption)</th>
							<th>Final Maturity Date</th>
							<th>Residual Maturity</th>
							<th>Residual Maturity Rounded</th>
							<th>Maturity Period</th>
							<th>Position</th>
							<th>Notional Type</th>
							<th>Cancellable (Y) Applicable only to cancellable swap</th>
							<th>Cancellable Date (Applicable only to cancellable swap)</th>
							<th>Cancellable Option Type (Applicable only to cancellable
								swap)</th>
							<th>Notional 1 (Assets)</th>
							<th>Notional 1 Currency</th>
							<th>Pay/Receive</th>
							<th>Coupon (Fixed Rate)</th>
							<th>Margin (Above Floating Rate)</th>
							<th>Benchmark Floating Rate)</th>
							<th>Benchmark Rate Tenor</th>
							<th>Notional 2 (Liabilities)</th>
							<th>Notional 2 Currency</th>
							<th>Pay/Receive</th>
							<th>Coupon (Fixed Rate)</th>
							<th>Margin (Above Floating Rate)</th>
							<th>Benchmark (Floating Rate)</th>
							<th>Benchmark Rate Tenor</th>
							<th>Clean Value/Fair Value (AED equivalent)</th>
							<th>Accrued Interest/Profit (AED equivalent)</th>
							<th>DV01 (AED equivalent)</th>
							<th>BR01 (AED equivalent)</th>
							<th>Dollar Delta (AED equivalent). Only applicable to
								swaption</th>
							<th>Dollar Vega (AED equivalent). Only applicable to
								swaption</th>
							<th>Dollar Gamma (AED equivalent). Only applicable to
								swaption</th>
							<th>Dollar Theta (AED equivalent). Only applicable to
								swaption</th>
							<th>Notional 1 (Assets)</th>
							<th>Notional 1 Currency</th>
							<th>Pay/Receive</th>
							<th>Coupon (Fixed Rate)</th>
							<th>Margin (Above Floating Rate)</th>
							<th>Benchmark (Floating Rate)</th>
							<th>Benchmark Rate Tenor</th>
							<th>Underlying Leg 1</th>
							<th>Underlying Leg 1 Details</th>
							<th>Notional 2 (Liabilities)</th>
							<th>Notional 2 Currency</th>
							<th>Pay/Receive</th>
							<th>Coupon (Fixed Rate)</th>
							<th>Margin (Above Floating Rate)</th>
							<th>Benchmark (Floating Rate)</th>
							<th>Benchmark Rate Tenor</th>
							<th>Underlying Leg 2</th>
							<th>Underlying Leg 2 Details</th>
							<th>Clean Value (AED equivalent)</th>
							<th>Accrued Interest/Profit (AED equivalent)</th>
							<th>DV01 (AED equivalent)</th>
							<th>CDS Type</th>
							<th>CDS Underlying(s)</th>
							<th>Quanto (Y)</th>
							<th>Nominal</th>
							<th>Clean Value (AED equivalent)</th>
							<th>IR DV01 (AED equivalent)</th>
							<th>CS01 (AED equivalent)</th>
							<th>Future Type</th>
							<th>Future underlying Contract</th>
							<th>Qty</th>
							<th>Contract size</th>
							<th>Contract Rate</th>
							<th>Market Rate</th>
							<th>Contract Valuation</th>
							<th>Sensitivity (AED equivalent)</th>
							<th>Options List</th>
							<th>Option type</th>
							<th>Underlying Type</th>
							<th>Underlying Details</th>
							<th>Strike</th>
							<th>Market Rate</th>
							<th>Barrier Type</th>
							<th>Barrier Upper Range</th>
							<th>Barrier Lower Range</th>
							<th>Option Fair Value (AED equivalent)</th>
							<th>Dollar Delta</th>
							<th>Dollar Vega</th>
							<th>Dollar Gamma</th>
							<th>Dollar Rho</th>
							<th>Dollar Theta</th>
							<th>Overall MTM (AED)</th>
							<th>IRS/PRS/CCS Positive MTM</th>
							<th>Asset-Swap/Future positive MTM</th>
							<th>CDS positive MTM</th>
							<th>Future contract positive MTM</th>
							<th>Option positive MTM</th>
							<th>Overall Positive MTM</th>
							<th>Individual positive contribution</th>
							<th>IRS/PRS/CCS Negative MTM</th>
							<th>Asset-Swap/Future negative MTM</th>
							<th>CDS negative MTM</th>
							<th>Future contract negative MTM</th>
							<th>Option negative MTM</th>
							<th>Overall Negative MTM</th>
							<th>Individual negative contribution</th>


						</tr>
					</thead>
					<tbody>

						<!-- Loop to render data dynamically -->
						<tr th:each="data : ${branchList}">
							<td style="text-align: center;min-width: 100px;"><a
								th:href="@{'/Trade_Level_Data_Derivatives_Simplified?formmode=edit&SI_NO=' + ${data.SI_NO}}">

									<i class="fa fa-edit" style="color: #007bff;"></i>
							</a></td>

							<td th:text="${#dates.format(data.bank_date, 'dd-MM-yyyy')}"></td>
							<td th:text="${data.bank_name}"></td>
							<td th:text="${data.head_office_subsidiary}"></td>
							<td th:text="${data.subsidiary}"></td>
							<td th:text="${data.bank_symbol}"></td>
							<td th:text="${data.conventional_islamic}"></td>
							<td th:text="${data.cbuae_tiering1}"></td>
							<td th:text="${data.cbuae_tiering2}"></td>
							<td th:text="${data.cpty_name}"></td>
							<td th:text="${data.internal_counterparty_ref}"></td>
							<td th:text="${data.internal_transaction_ref}"></td>
							<td th:text="${data.underlying_asset_class}"></td>
							<td th:text="${data.derivatives_type}"></td>
							<td th:text="${data.transaction_rationale}"></td>
							<td th:text="${data.bundle_transaction}"></td>
							<td th:text="${data.back_to_back_transaction}"></td>
							<td th:text="${data.instruments_characteristics}"></td>
							<td th:text="${data.currency_valuation}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.aed_fx_spot_rate_conversion, 1, 'COMMA', 2, 'POINT')}"></td>
							<td th:text="${#dates.format(data.start_date, 'dd-MM-yyyy')}"></td>
							<td
								th:text="${#dates.format(data.effective_delivery_date, 'dd-MM-yyyy')}"></td>
							<td
								th:text="${#dates.format(data.final_maturity_date, 'dd-MM-yyyy')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.residual_maturity, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.residual_maturity_rounded, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.maturity_period, 1, 'COMMA', 2, 'POINT')}"></td>
							<td th:text="${data.position}"></td>
							<td th:text="${data.notional_type}"></td>
							<td th:text="${data.cancellable}"></td>
							<td
								th:text="${#dates.format(data.cancellable_date, 'dd-MM-yyyy')}"></td>
							<td th:text="${data.cancellable_option_type}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.notional1_assets, 1, 'COMMA', 2, 'POINT')}"></td>
							<td th:text="${data.notional1_currency}"></td>
							<td th:text="${data.pay_receive1}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.coupon_fixed_rate1, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.margin1, 1, 'COMMA', 2, 'POINT')}"></td>
							<td th:text="${data.benchmark_floating_rate1}"></td>
							<td th:text="${data.benchmark_rate_tenor1}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.notional2_liabilities, 1, 'COMMA', 2, 'POINT')}"></td>
							<td th:text="${data.notional2_currency}"></td>
							<td th:text="${data.pay_receive2}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.coupon_fixed_rate2, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.margin2, 1, 'COMMA', 2, 'POINT')}"></td>
							<td th:text="${data.benchmark_floating_rate2}"></td>
							<td th:text="${data.benchmark_rate_tenor2}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.clean_value_aed, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.accrued_interest_aed, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.dv01_aed, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.br01_aed, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.dollar_delta_aed, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.dollar_vega_aed, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.dollar_gamma_aed, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.dollar_theta_aed, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.uleg1_notional, 1, 'COMMA', 2, 'POINT')}"></td>
							<td th:text="${data.uleg1_currency}"></td>
							<td th:text="${data.uleg1_pay_receive}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.uleg1_coupon, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.uleg1_margin, 1, 'COMMA', 2, 'POINT')}"></td>
							<td th:text="${data.uleg1_benchmark}"></td>
							<td th:text="${data.uleg1_tenor}"></td>
							<td th:text="${data.underlying_leg1}"></td>
							<td th:text="${data.uleg1_details}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.uleg2_notional, 1, 'COMMA', 2, 'POINT')}"></td>
							<td th:text="${data.uleg2_currency}"></td>
							<td th:text="${data.uleg2_pay_receive}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.uleg2_coupon, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.uleg2_margin, 1, 'COMMA', 2, 'POINT')}"></td>
							<td th:text="${data.uleg2_benchmark}"></td>
							<td th:text="${data.uleg2_tenor}"></td>
							<td th:text="${data.underlying_leg2}"></td>
							<td th:text="${data.uleg2_details}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.uleg2_clean_value_aed, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.uleg2_accrued_interest_aed, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.uleg2_dv01_aed, 1, 'COMMA', 2, 'POINT')}"></td>
							<td th:text="${data.cds_type}"></td>
							<td th:text="${data.cds_underlyings}"></td>
							<td th:text="${data.quanto}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.nominal, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.cleanvalue_aed, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.ir_dv01_aed, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.cs01_aed, 1, 'COMMA', 2, 'POINT')}"></td>
							<td th:text="${data.future_type}"></td>
							<td th:text="${data.future_underlying_contract}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.future_qty, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.future_contract_size, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.future_contract_rate, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.future_market_rate, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.future_contract_valuation, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.future_sensitivity_aed, 1, 'COMMA', 2, 'POINT')}"></td>
							<td th:text="${data.options_list}"></td>
							<td th:text="${data.option_type}"></td>
							<td th:text="${data.option_underlying_type}"></td>
							<td th:text="${data.option_underlying_details}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.strike, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.option_market_rate, 1, 'COMMA', 2, 'POINT')}"></td>
							<td th:text="${data.barrier_type}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.barrier_upper_range, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.barrier_lower_range, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.option_fair_value_aed, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.option_dollar_delta, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.option_dollar_vega, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.option_dollar_gamma, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.option_dollar_rho, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.option_dollar_theta, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.overall_mtm_aed, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.irs_positive_mtm, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.asset_swap_positive_mtm, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.cds_positive_mtm, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.future_contract_positive_mtm, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.option_positive_mtm, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.overall_positive_mtm, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.individual_positive_contribution, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.irs_negative_mtm, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.asset_swap_negative_mtm, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.cds_negative_mtm, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.future_contract_negative_mtm, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.option_negative_mtm, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.overall_negative_mtm, 1, 'COMMA', 2, 'POINT')}"></td>
							<td style="text-align: right;"
								th:text="${#numbers.formatDecimal(data.individual_negative_contribution, 1, 'COMMA', 2, 'POINT')}"></td>


						</tr>

						</tr>

					</tbody>
				</table>
			</div>


			<div class="card-footer text-center"
				style="background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(8px); padding: 10px; border-top: 2px solid #ccc;">
				<!-- <button type="button" class="custom-tab-btn" onclick="home();">
					<i class="fa fa-home"></i> Home
				</button> -->


				<button th:if="${formmode == 'null' or formmode == 'add'}"
					type="button" class="role-add-btn" onclick="submitForm()">Save</button>


				<!-- <button type="button" class="custom-tab-btn" onclick="back();">
					<i class="fa fa-arrow-left"></i> Back
				</button> -->

			</div>

		</div>



	</div>

	<!------------------ edit starts-------------------------------------------------------------->

	<div th:if="${formmode}=='edit'" style="align-items: center">

		<div class="row">
			<form th:action="@{/updatetradeleveldataderivativesimplified}"
				th:object="${tradeleveldataderivative}" method="post"
				id="TradelevelDataderivative">
				<div class="card" style="margin-left: 15px; margin-right: 15px;">
					<div
						class="role-page-header d-flex justify-content-between align-items-center">
						<div class="float-left">
							<div class="role-page-title">
								<h4>Trade Level Data Derivative Simplified - Edit</h4>
								<div
									style="width: 415px; height: 3px; background-color: #0073e6; border-radius: 2px; margin-top: 6px; box-shadow: 0 4px 12px rgba(0, 115, 230, 0.6);"></div>


							</div>
						</div>

					</div>
					<div class="card-body" style="max-height: 500px; overflow-y: auto;">



						<input type="hidden" th:field="*{SI_NO}" />

						<div class="form-group row">
							<label class="col-sm-2 col-form-label"> Date</label>
							<div class="col-sm-4">
								<input type="date" class="form-control" th:field="*{bank_date}"
									readonly />
							</div>
							<label class="col-sm-2 col-form-label">Bank Name</label>
							<div class="col-sm-4">
								<select class="form-control vchar-100" th:field="*{bank_name}"
									onchange="handleBankChange(this)">
									<option value="">-- Select Bank --</option>
									<option th:each="bank : ${bankList}"
										th:value="${bank.bankName}" th:text="${bank.bankName}">
									</option>
								</select>
							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Head Office Subsidiary</label>
							<div class="col-sm-4">
								<select class="form-control vchar-50"
									th:field="*{head_office_subsidiary}">
									<option value="">-- Select --</option>
									<option value="Head Office">Head Office</option>
									<option value="Subsidiary">Subsidiary</option>
								</select>
							</div>
							<label class="col-sm-2 col-form-label">Subsidiary</label>
							<div class="col-sm-4">
								<input type="text" class="form-control vchar-50"
									th:field="*{subsidiary}" />
							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Bank Symbol</label>
							<div class="col-sm-4">
								<input type="text" class="form-control vchar-50"
									th:field="*{bank_symbol}" id="bankSymbol" readonly />
							</div>
							<label class="col-sm-2 col-form-label">Conventional/Islamic</label>
							<div class="col-sm-4">
								<input type="text" class="form-control vchar-50"
									th:field="*{conventional_islamic}" id="conventionalIslamic"
									readonly />
							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">CBUAE Tiering</label>
							<div class="col-sm-4">
								<input type="text" class="form-control vchar-50"
									th:field="*{cbuae_tiering1}" id="localForeign" readonly />
							</div>
							<label class="col-sm-2 col-form-label">CBUAE Tiering</label>
							<div class="col-sm-4">
								<input type="text" class="form-control vchar-50"
									th:field="*{cbuae_tiering2}" id="cbuaeTiering" readonly />
							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Cpty Name</label>
							<div class="col-sm-4">
								<input type="text" class="form-control vchar-50"
									th:field="*{cpty_name}" />
							</div>
							<label class="col-sm-2 col-form-label">Internal
								Counterparty Reference</label>
							<div class="col-sm-4">
								<input type="text" class="form-control vchar-50"
									th:field="*{internal_counterparty_ref}" />
							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Internal
								Transaction Reference</label>
							<div class="col-sm-4">
								<input type="text" class="form-control vchar-50"
									th:field="*{internal_transaction_ref}" />
							</div>
							<label class="col-sm-2 col-form-label">Underlying asset
								class</label>
							<div class="col-sm-4">
								<select class="form-control vchar-50"
									th:field="*{underlying_asset_class}">
									<option value="">-- Select --</option>
									<option value="Commodity">Commodity</option>
									<option value="Credit">Credit</option>
									<option value="Equity">Equity</option>
									<option value="FX">FX</option>
									<option value="Inflation">Inflation</option>
									<option value="Rate">Rate</option>
									<option value="Other">Other</option>
								</select>
							</div>

						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label ">Derivatives Type</label>
							<div class="col-sm-4">
								<select class="form-control vchar-50"
									th:field="*{derivatives_type}">
									<option value="">-- Select --</option>
									<option value="Cross-Currency Swap">Cross-Currency
										Swap</option>
									<option value="Forward Rate Agreement (FRA)">Forward
										Rate Agreement (FRA)</option>
									<option value="Future">Future</option>
									<option value="FX Forward">FX Forward</option>
									<option value="Option">Option</option>
									<option value="Interest Rate Swap">Interest Rate Swap</option>
									<option value="Asset-Swap">Asset-Swap</option>
									<option value="Credit Default Swap">Credit Default
										Swap</option>
									<option value="Total Return Swap">Total Return Swap</option>
									<option value="Swaption">Swaption</option>
									<option value="Inflation Swap">Inflation Swap</option>
									<option value="Zero Coupon Swap">Zero Coupon Swap</option>
									<option value="Other">Other</option>
								</select>
							</div>

							<label class="col-sm-2 col-form-label">Transaction
								Rationale</label>
							<div class="col-sm-4">
								<select class="form-control vchar-50"
									th:field="*{transaction_rationale}">
									<option value="">-- Select --</option>
									<option value="Balance Sheet Hedge">Balance Sheet
										Hedge</option>
									<option value="Hedge Accounting">Hedge Accounting</option>
									<option value="Internal Hedge">Internal Hedge</option>
									<option value="Sales ">Sales</option>
									<option value="Trading ">Trading</option>
									<option value="Market-Making ">Market-Making</option>

									<option value="Other">Other</option>
								</select>
							</div>

						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Bundle Transaction</label>
							<div class="col-sm-4">
								<select class="form-control vchar-10"
									th:field="*{bundle_transaction}">
									<option value="">-- Select --</option>
									<option value="Y">Y</option>
								</select>
							</div>

							<label class="col-sm-2 col-form-label">Back To Back
								Transaction</label>
							<div class="col-sm-4">
								<select class="form-control vchar-10"
									th:field="*{back_to_back_transaction}">
									<option value="">-- Select --</option>
									<option value="Y">Y</option>
								</select>
							</div>

						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Instruments
								Characteristics</label>
							<div class="col-sm-4">
								<input type="text" class="form-control vchar-50"
									th:field="*{instruments_characteristics}" />
							</div>
							<label class="col-sm-2 col-form-label">Currency Valuation</label>
							<div class="col-sm-4">
								<input type="text" class="form-control vchar-10"
									th:field="*{currency_valuation}" />
							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">AED FX Spot Rate
								Conversion</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{aed_fx_spot_rate_conversion}" />
							</div>
							<label class="col-sm-2 col-form-label">Start Date</label>
							<div class="col-sm-4">
								<input type="date" class="form-control" th:field="*{start_date}" />
							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Effective or
								Delivery Date (applicable to forward starting swap, future and
								swaption)</label>
							<div class="col-sm-4">
								<input type="date" class="form-control"
									th:field="*{effective_delivery_date}" />
							</div>
							<label class="col-sm-2 col-form-label">Final Maturity
								Date</label>
							<div class="col-sm-4">
								<input type="date" class="form-control"
									th:field="*{final_maturity_date}" />
							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Residual Maturity</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{residual_maturity}" />
							</div>
							<label class="col-sm-2 col-form-label">Residual Maturity
								Rounded</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{residual_maturity_rounded}" />
							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Maturity Period</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{maturity_period}" />
							</div>
							<label class="col-sm-2 col-form-label">Position</label>
							<div class="col-sm-4">
								<select class="form-control vchar-10" th:field="*{position}">
									<option value="">-- Select --</option>
									<option value="Long">Long</option>
									<option value="Short">Short</option>
								</select>
							</div>

						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Notional Type</label>
							<div class="col-sm-4">
								<select class="form-control vchar-20"
									th:field="*{notional_type}">
									<option value="">-- Select --</option>
									<option value="Bullet">Bullet</option>
									<option value="Amortizing">Amortizing</option>
									<option value="Step-up">Step-up</option>
									<option value="Other">Other</option>
								</select>
							</div>

							<label class="col-sm-2 col-form-label">Cancellable (Y)
								Applicable only to cancellable swap</label>
							<div class="col-sm-4">
								<select class="form-control vchar-1" th:field="*{cancellable}">
									<option value="">-- Select --</option>
									<option value="Y">Y</option>
								</select>
							</div>

						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Cancellable Date
								(Applicable only to cancellable swap)</label>
							<div class="col-sm-4">
								<input type="date" class="form-control"
									th:field="*{cancellable_date}" />
							</div>
							<label class="col-sm-2 col-form-label">Cancellable Option
								Type (Applicable only to cancellable swap) </label>
							<div class="col-sm-4">
								<select class="form-control vchar-20"
									th:field="*{cancellable_option_type}">
									<option value="">-- Select --</option>
									<option value="European">European</option>
									<option value="American">American</option>
									<option value="Bermudean">Bermudean</option>
								</select>
							</div>

						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Notional 1
								(Assets)</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{notional1_assets}" />
							</div>
							<label class="col-sm-2 col-form-label">Notional 1
								Currency</label>
							<div class="col-sm-4">
								<input type="text" class="form-control vchar-10"
									th:field="*{notional1_currency}" />
							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Pay/Receive</label>
							<div class="col-sm-4">
								<select class="form-control vchar-10" th:field="*{pay_receive1}">
									<option value="">--Select--</option>
									<option value="Pay">Pay</option>
									<option value="Receive">Receive</option>
								</select>
							</div>

							<label class="col-sm-2 col-form-label">Coupon (Fixed
								Rate)</label>
							<div class="col-sm-4">
								<input type="text" class="form-control  number-24-2"
									th:field="*{coupon_fixed_rate1}" />
							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Margin (Above
								Floating Rate)</label>
							<div class="col-sm-4">
								<input type="text" class="form-control  number-24-2"
									th:field="*{margin1}" />
							</div>
							<label class="col-sm-2 col-form-label">Benchmark Floating
								Rate)</label>
							<div class="col-sm-4">
								<select class="form-control vchar-30"
									th:field="*{benchmark_floating_rate1}">
									<option value="">-- Select --</option>
									<option value="RFR in advance">RFR in advance</option>
									<option value="RFR in arrears">RFR in arrears</option>
									<option value="RFR Term">RFR Term</option>
									<option value="IBOR">IBOR</option>
									<option value="Other">Other</option>
								</select>
							</div>

						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Benchmark Rate
								Tenor</label>
							<div class="col-sm-4">
								<select class="form-control vchar-20"
									th:field="*{benchmark_rate_tenor1}">
									<option value="">-- Select --</option>
									<option value="Overnight">Overnight</option>
									<option value="1W">1W</option>
									<option value="1M">1M</option>
									<option value="3M">3M</option>
									<option value="6M">6M</option>
									<option value="9M">9M</option>
									<option value="12M">12M</option>
								</select>
							</div>

							<label class="col-sm-2 col-form-label">Notional 2
								(Liabilities)</label>
							<div class="col-sm-4">
								<input type="text" class="form-control  number-24-2"
									th:field="*{notional2_liabilities}" />
							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Notional 2
								Currency</label>
							<div class="col-sm-4">
								<input type="text" class="form-control vchar-10"
									th:field="*{notional2_currency}" />
							</div>
							<label class="col-sm-2 col-form-label">Pay/Receive</label>
							<div class="col-sm-4">
								<select class="form-control vchar-10" th:field="*{pay_receive2}">
									<option value="">-- Select --</option>
									<option value="Pay">Pay</option>
									<option value="Receive">Receive</option>
								</select>
							</div>

						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Coupon (Fixed
								Rate)</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{coupon_fixed_rate2}" />
							</div>
							<label class="col-sm-2 col-form-label">Margin (Above
								Floating Rate)</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{margin2}" />
							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Benchmark
								(Floating Rate)</label>
							<div class="col-sm-4">
								<select class="form-control vchar-30"
									th:field="*{benchmark_floating_rate2}">
									<option value="">-- Select --</option>
									<option value="RFR in advance">RFR in advance</option>
									<option value="RFR in arrears">RFR in arrears</option>
									<option value="RFR Term">RFR Term</option>
									<option value="IBOR">IBOR</option>
									<option value="Other">Other</option>
								</select>
							</div>

							<label class="col-sm-2 col-form-label">Benchmark Rate
								Tenor</label>
							<div class="col-sm-4">
								<select class="form-control vchar-20"
									th:field="*{benchmark_rate_tenor2}">
									<option value="">-- Select --</option>
									<option value="Overnight">Overnight</option>
									<option value="1W">1W</option>
									<option value="1M">1M</option>
									<option value="3M">3M</option>
									<option value="6M">6M</option>
									<option value="9M">9M</option>
									<option value="12M">12M</option>
								</select>
							</div>

						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Clean Value/Fair
								Value (AED equivalent)</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{clean_value_aed}" />
							</div>
							<label class="col-sm-2 col-form-label">Accrued
								Interest/Profit (AED equivalent)</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{accrued_interest_aed}" />
							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">DV01 (AED
								equivalent)</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{dv01_aed}" />
							</div>
							<label class="col-sm-2 col-form-label">BR01 (AED
								equivalent)</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{br01_aed}" />
							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Dollar Delta (AED
								equivalent). Only applicable to swaption</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{dollar_delta_aed}" />
							</div>
							<label class="col-sm-2 col-form-label">Dollar Vega (AED
								equivalent). Only applicable to swaption</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{dollar_vega_aed}" />
							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Dollar Gamma (AED
								equivalent). Only applicable to swaption</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{dollar_gamma_aed}" />
							</div>
							<label class="col-sm-2 col-form-label">Dollar Theta (AED
								equivalent). Only applicable to swaption </label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{dollar_theta_aed}" />
							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Notional 1
								(Assets)</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{uleg1_notional}" />
							</div>
							<label class="col-sm-2 col-form-label">Notional 1
								Currency</label>
							<div class="col-sm-4">
								<input type="text" class="form-control vchar-10"
									th:field="*{uleg1_currency}" />
							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Pay/Receive</label>
							<div class="col-sm-4">
								<select class="form-control vchar-10"
									th:field="*{uleg1_pay_receive}">
									<option value="">-- Select --</option>
									<option value="Pay">Pay</option>
									<option value="Receive">Receive</option>
								</select>
							</div>

							<label class="col-sm-2 col-form-label">Coupon (Fixed
								Rate)</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{uleg1_coupon}" />
							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Margin (Above
								Floating Rate)</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{uleg1_margin}" />
							</div>
							<label class="col-sm-2 col-form-label">Benchmark
								(Floating Rate)</label>
							<div class="col-sm-4">
								<select class="form-control vchar-30"
									th:field="*{uleg1_benchmark}">
									<option value="">-- Select --</option>
									<option value="RFR in advance">RFR in advance</option>
									<option value="RFR in arrears">RFR in arrears</option>
									<option value="RFR Term">RFR Term</option>
									<option value="IBOR">IBOR</option>
									<option value="Total Return">Total Return</option>
									<option value="Other">Other</option>
								</select>
							</div>

						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Benchmark Rate
								Tenor</label>
							<div class="col-sm-4">
								<select class="form-control vchar-20" th:field="*{uleg1_tenor}">
									<option value="">-- Select --</option>
									<option value="Overnight">Overnight</option>
									<option value="1W">1W</option>
									<option value="1M">1M</option>
									<option value="3M">3M</option>
									<option value="6M">6M</option>
									<option value="9M">9M</option>
									<option value="12M">12M</option>
								</select>
							</div>

							<label class="col-sm-2 col-form-label">Underlying Leg 1</label>
							<div class="col-sm-4">
								<select class="form-control vchar-30"
									th:field="*{underlying_leg1}">
									<option value="">-- Select --</option>
									<option value="Bond">Bond</option>
									<option value="Equity">Equity</option>
									<option value="Loan">Loan</option>
									<option value="Basket of Bonds">Basket of Bonds</option>
									<option value="Basket of Shares">Basket of Shares</option>
									<option value="Basket of Loans">Basket of Loans</option>
								</select>
							</div>

						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Underlying Leg 1
								Details</label>
							<div class="col-sm-4">
								<input type="text" class="form-control vchar-30"
									th:field="*{uleg1_details}" />
							</div>
							<label class="col-sm-2 col-form-label">Notional 2
								(Liabilities)</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{uleg2_notional}" />
							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Notional 2
								Currency</label>
							<div class="col-sm-4">
								<input type="text" class="form-control vchar-10"
									th:field="*{uleg2_currency}" />
							</div>
							<label class="col-sm-2 col-form-label ">Pay/Receive</label>
							<div class="col-sm-4">
								<select class="form-control vchar-10"
									th:field="*{uleg2_pay_receive}">
									<option value="">-- Select --</option>
									<option value="Pay">Pay</option>
									<option value="Receive">Receive</option>
								</select>
							</div>

						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Coupon (Fixed
								Rate)</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{uleg2_coupon}" />
							</div>
							<label class="col-sm-2 col-form-label">Margin (Above
								Floating Rate)</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{uleg2_margin}" />
							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Benchmark
								(Floating Rate)</label>
							<div class="col-sm-4">
								<select class="form-control vchar-30"
									th:field="*{uleg2_benchmark}">
									<option value="" disabled selected>-- Select --</option>
									<option value="RFR in advance">RFR in advance</option>
									<option value="RFR in arrears">RFR in arrears</option>
									<option value="RFR Term">RFR Term</option>
									<option value="IBOR">IBOR</option>
									<option value="Total Return">Total Return</option>
									<option value="Other">Other</option>
								</select>
							</div>

							<label class="col-sm-2 col-form-label">Benchmark Rate
								Tenor</label>
							<div class="col-sm-4">
								<select class="form-control vchar-20" th:field="*{uleg2_tenor}">
									<option value="">-- Select --</option>
									<option value="Overnight">Overnight</option>
									<option value="1W">1W</option>
									<option value="1M">1M</option>
									<option value="3M">3M</option>
									<option value="6M">6M</option>
									<option value="9M">9M</option>
									<option value="12M">12M</option>
								</select>
							</div>

						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Underlying Leg 2</label>
							<div class="col-sm-4">
								<select class="form-control vchar-30"
									th:field="*{underlying_leg2}">
									<option value="">-- Select --</option>
									<option value="Bond">Bond</option>
									<option value="Equity">Equity</option>
									<option value="Loan">Loan</option>
									<option value="Basket of Bonds">Basket of Bonds</option>
									<option value="Basket of Shares">Basket of Shares</option>
									<option value="Basket of Loans">Basket of Loans</option>
								</select>
							</div>

							<label class="col-sm-2 col-form-label">Underlying Leg 2
								Details</label>
							<div class="col-sm-4">
								<input type="text" class="form-control vchar-30"
									th:field="*{uleg2_details}" />
							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Clean Value (AED
								equivalent)</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{uleg2_clean_value_aed}" />
							</div>
							<label class="col-sm-2 col-form-label">Accrued
								Interest/Profit (AED equivalent)</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{uleg2_accrued_interest_aed}" />
							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">DV01 (AED
								equivalent) </label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{uleg2_dv01_aed}" />
							</div>
							<label class="col-sm-2 col-form-label">CDS Type</label>
							<div class="col-sm-4">
								<select class="form-control vchar-20" th:field="*{cds_type}">
									<option value="">-- Select --</option>
									<option value="Single Name">Single Name</option>
									<option value="Basket">Basket</option>
									<option value="Index">Index</option>
									<option value="Other">Other</option>
								</select>
							</div>

						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">CDS Underlying(s)</label>
							<div class="col-sm-4">
								<input type="text" class="form-control vchar-50"
									th:field="*{cds_underlyings}" />
							</div>
							<label class="col-sm-2 col-form-label">Quanto (Y)</label>
							<div class="col-sm-4">
								<select class="form-control vchar-1" th:field="*{quanto}">
									<option value="">-- Select --</option>
									<option value="Y">Y</option>
								</select>
							</div>

						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Nominal</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{nominal}" />
							</div>
							<label class="col-sm-2 col-form-label">Clean Value (AED
								equivalent)</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{cleanvalue_aed}" />
							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">IR DV01 (AED
								equivalent)</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{ir_dv01_aed}" />
							</div>
							<label class="col-sm-2 col-form-label">CS01 (AED
								equivalent)</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{cs01_aed}" />
							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Future Type</label>
							<div class="col-sm-4">
								<input type="text" class="form-control vchar-50"
									th:field="*{future_type}" />
							</div>
							<label class="col-sm-2 col-form-label">Future underlying
								Contract</label>
							<div class="col-sm-4">
								<input type="text" class="form-control vchar-50"
									th:field="*{future_underlying_contract}" />
							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Qty</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{future_qty}" />
							</div>
							<label class="col-sm-2 col-form-label">Contract size</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{future_contract_size}" />
							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Contract Rate</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{future_contract_rate}" />
							</div>
							<label class="col-sm-2 col-form-label">Market Rate</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{future_market_rate}" />
							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Contract Valuation</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{future_contract_valuation}" />
							</div>
							<label class="col-sm-2 col-form-label">Sensitivity (AED
								equivalent)</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{future_sensitivity_aed}" />
							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Options List</label>
							<div class="col-sm-4">
								<select class="form-control vchar-50" th:field="*{options_list}">
									<option value="">-- Select --</option>
									<option value="Accumulative Forward">Accumulative
										Forward</option>
									<option value="Amortizing Forward">Amortizing Forward</option>
									<option value="Asian">Asian</option>
									<option value="Auto-Renewal Forward">Auto-Renewal
										Forward</option>
									<option value="Basket-Linked Note">Basket-Linked Note</option>
									<option value="Baskets">Baskets</option>
									<option value="Best-of">Best-of</option>
									<option value="Boomerang Forward">Boomerang Forward</option>
									<option value="Boosted Spot/Forward">Boosted
										Spot/Forward</option>
									<option value="Buffered Cross Currency Swap">Buffered
										Cross Currency Swap</option>
									<option value="Butterly Forward">Butterly Forward</option>
									<option value="Call">Call</option>
									<option value="Cancellable Swap">Cancellable Swap</option>
									<option value="Cap">Cap</option>
									<option value="Cliquet">Cliquet</option>
									<option value="Collar Extra Series">Collar Extra
										Series</option>
									<option value="Correlation Swap">Correlation Swap</option>
									<option value="Corridor Deposit/Loan">Corridor
										Deposit/Loan</option>
									<option value="Corridor Swap">Corridor Swap</option>
									<option value="Corridors">Corridors</option>
									<option value="Coumpound">Coumpound</option>
									<option value="Digital">Digital</option>
									<option value="Double Shark Forward">Double Shark
										Forward</option>
									<option value="Double-No-Touch Linked Swap">Double-No-Touch
										Linked Swap</option>
									<option value="Dual Asset Range Accrual Note">Dual
										Asset Range Accrual Note</option>
									<option value="Dual Currency">Dual Currency</option>
									<option value="Escalator Ratio Forward">Escalator
										Ratio Forward</option>
									<option value="Fade-In Forward">Fade-In Forward</option>
									<option value="Fader Shark Forward">Fader Shark
										Forward</option>
									<option value="Faders">Faders</option>
									<option value="Flexi Forward/Time Option">Flexi
										Forward/Time Option</option>
									<option value="Flip Swap">Flip Swap</option>
									<option value="Floor">Floor</option>
									<option value="Forward Start Forward">Forward Start
										Forward</option>
									<option value="Forward Start Chooser Forward">Forward
										Start Chooser Forward</option>
									<option value="Forward Volatility Agreements (FVAs)">Forward
										Volatility Agreements (FVAs)</option>
									<option value="Free Style Forward">Free Style Forward</option>
									<option value="FX-Express Certificate">FX-Express
										Certificate</option>
									<option value="FX-linked Bonds">FX-linked Bonds</option>
									<option value="Future">Future</option>
									<option value="Gold Participation">Gold Participation</option>
									<option value="Hanseatic Swap">Hanseatic Swap</option>
									<option value="Harmonic Average">Harmonic Average</option>
									<option value="Hybrid Forward Contracts">Hybrid
										Forward Contracts</option>
									<option value="Installments">Installments</option>
									<option value="Intrinsic Value Ratio Knock-Out Forward">Intrinsic
										Value Ratio Knock-Out Forward</option>
									<option value="KIKO">KIKO</option>
									<option value="Tarn Knock-out Forward">Tarn Knock-out
										Forward</option>
									<option value="Leveraged Target Forward">Leveraged
										Target Forward</option>
									<option value="Lookback">Lookback</option>
									<option value="Moving Strike Turbo Spot">Moving Strike
										Turbo Spot</option>
									<option value="Limited Multiplicity Power">Limited
										Multiplicity Power</option>
									<option value="Outright Participating Collar">Outright
										Participating Collar</option>
									<option value="Participating Forward">Participating
										Forward</option>
									<option value="Pay-Later">Pay-Later</option>
									<option value="Performance-Linked">Performance-Linked</option>
									<option value="Pivot Target Forward (PTF)">Pivot
										Target Forward (PTF)</option>
									<option value="Plain Target Forward">Plain Target
										Forward</option>
									<option value="Power">Power</option>
									<option value="Power Reverse Dual Currency Bonds">Power
										Reverse Dual Currency Bonds</option>
									<option value="Put">Put</option>
									<option value="Quanto">Quanto</option>
									<option value="Range Accrual">Range Accrual</option>
									<option value="Range Forward">Range Forward</option>
									<option value="Range Reset Swap">Range Reset Swap</option>
									<option value="Ratchet Shark Forward">Ratchet Shark
										Forward</option>
									<option value="Shark Forward Series">Shark Forward
										Series</option>
									<option value="Spread">Spread</option>
									<option value="Step Down">Step Down</option>
									<option value="Step Up">Step Up</option>
									<option value="Strike Leverage Forward">Strike
										Leverage Forward</option>
									<option value="Target Profit Forward">Target Profit
										Forward</option>
									<option value="Tender Linked Forward">Tender Linked
										Forward</option>
									<option value="Tower Deposit/Loan">Tower Deposit/Loan</option>
									<option value="Tunnel Deposit/Loan">Tunnel
										Deposit/Loan</option>
									<option value="Turbo Cross Currency Swap">Turbo Cross
										Currency Swap</option>
									<option value="Turbo Deposit/Loan">Turbo Deposit/Loan</option>
									<option value="Variance Swap">Variance Swap</option>
									<option value="Volatility Swap">Volatility Swap</option>
									<option value="Worst-of">Worst-of</option>
									<option value="Other">Other</option>
								</select>
							</div>

							<label class="col-sm-2 col-form-label">Option type</label>
							<div class="col-sm-4">
								<select class="form-control vchar-20" th:field="*{option_type}">
									<option value="">-- Select --</option>
									<option value="European">European</option>
									<option value="American">American</option>
									<option value="Bermudean">Bermudean</option>
								</select>
							</div>

						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Underlying Type</label>
							<div class="col-sm-4">
								<select class="form-control vchar-10"
									th:field="*{option_underlying_type}">
									<option value="">-- Select --</option>
									<option value="Single">Single</option>
									<option value="Basket">Basket</option>
								</select>
							</div>

							<label class="col-sm-2 col-form-label">Underlying Details</label>
							<div class="col-sm-4">
								<input type="text" class="form-control vchar-50"
									th:field="*{option_underlying_details}" />
							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Strike</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{strike}" />
							</div>
							<label class="col-sm-2 col-form-label">Market Rate</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{option_market_rate}" />
							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Barrier Type</label>
							<div class="col-sm-4">
								<select class="form-control vchar-20" th:field="*{barrier_type}">
									<option value="">-- Select --</option>
									<option value="Up and Out (UO)">Up and Out (UO)</option>
									<option value="Up and Down (UD)">Up and Down (UD)</option>
									<option value="Down and In (DI)">Down and In (DI)</option>
									<option value="Down and Up (DU)">Down and Up (DU)</option>
								</select>
							</div>

							<label class="col-sm-2 col-form-label">Barrier Upper
								Range</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{barrier_upper_range}" />
							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Barrier Lower
								Range</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{barrier_lower_range}" />
							</div>
							<label class="col-sm-2 col-form-label">Option Fair Value
								(AED equivalent)</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{option_fair_value_aed}" />
							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Dollar Delta</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{option_dollar_delta}" />
							</div>
							<label class="col-sm-2 col-form-label">Dollar Vega</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{option_dollar_vega}" />
							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Dollar Gamma</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{option_dollar_gamma}" />
							</div>
							<label class="col-sm-2 col-form-label">Dollar Rho</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{option_dollar_rho}" />
							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Dollar Theta</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{option_dollar_theta}" />
							</div>
							<label class="col-sm-2 col-form-label">Overall MTM (AED)</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{overall_mtm_aed}" />
							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">IRS/PRS/CCS
								Positive MTM</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{irs_positive_mtm}" />
							</div>
							<label class="col-sm-2 col-form-label">Asset-Swap/Future
								positive MTM </label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{asset_swap_positive_mtm}" />
							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">CDS positive MTM</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{cds_positive_mtm}" />
							</div>
							<label class="col-sm-2 col-form-label">Future contract
								positive MTM</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{future_contract_positive_mtm}" />
							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Option positive
								MTM</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{option_positive_mtm}" />
							</div>
							<label class="col-sm-2 col-form-label">Overall Positive
								MTM</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{overall_positive_mtm}" />
							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Individual
								positive contribution</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{individual_positive_contribution}" />
							</div>
							<label class="col-sm-2 col-form-label">IRS/PRS/CCS
								Negative MTM</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{irs_negative_mtm}" />
							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Asset-Swap/Future
								negative MTM</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{asset_swap_negative_mtm}" />
							</div>
							<label class="col-sm-2 col-form-label">CDS negative MTM</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{cds_negative_mtm}" />
							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Future contract
								negative MTM</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{future_contract_negative_mtm}" />
							</div>
							<label class="col-sm-2 col-form-label">Option Negative
								MTM</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{option_negative_mtm}" />
							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label">Overall Negative
								MTM</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{overall_negative_mtm}" />
							</div>
							<label class="col-sm-2 col-form-label">Individual
								Negative Contribution</label>
							<div class="col-sm-4">
								<input type="text" class="form-control number-24-2"
									th:field="*{individual_negative_contribution}" />
							</div>
						</div>

						<!-- Submit -->
						<div class="card-footer text-center">
							<button type="submit" class="role-add-btn"
								onclick="updateform(event)">Update</button>
							<a
								th:href="@{/Trade_Level_Data_Derivatives_Simplified(formmode='list')}"
								class="role-add-btn" style="text-decoration: none;">Cancel</a>
						</div>

					</div>
			</form>
		</div>
	</div>
	</div>


	<div class="modal fade" id="datadelete">
		<div
			class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
			<div class="modal-content">
				<div class="modal-body"
					style="margin-top: 8px; text-align: center; color: #f15362;">
					<button type="button" class="close" data-dismiss="modal">Ã—</button>
					Are you Sure want to delete?
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary"
						onclick="submitformdelete(this);" th:attr="data-formmode=delete">Submit</button>
					<button type="button" class="btn btn-primary" data-dismiss="modal">Cancel</button>
				</div>
			</div>
		</div>
	</div>
	<!-- Floating Back Button -->
	<button id="floatingBackBtn" onclick="goBack()" title="Go Back">
		<i class="fa fa-arrow-left"></i>
	</button>
	<!-- Floating Forward Button -->
	<button id="floatingForwardBtn" onclick="goForward()"
		title="Go Forward">
		<i class="fa fa-arrow-right"></i>
	</button>
	<div class="modal fade" id="formmsg">
		<div
			class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
			<div class="modal-content">
				<div class="modal-body"
					style="margin-top: 8px; text-align: center; color: aliceblue;">
					<button type="button" class="close" data-dismiss="modal">Ã—</button>
					<a th:value="${msg}"></a>
				</div>
				<div class="modal-footer"
					style="background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(8px); padding: 10px; border-top: 2px solid #ccc;">
					<button type="button" class="btn btn-primary"
						onclick="submitformdelete(this);" th:attr="data-formmode=delete">Submit</button>
					<button type="button" class="btn btn-primary" data-dismiss="modal">Cancel</button>
				</div>
			</div>
		</div>
	</div>
	</div>
	<div class="modal fade" id="alert">
		<div
			class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
			<div class="modal-content">
				<div class="menu-title-header">
					<div class="modal-title" id="exampleModalLabel"
						style="text-align: center; color: white;">BANK OF BARODA</div>
				</div>
				<div class="modal-body" style="text-align: center">
					<p id="alertmsg"></p>
					<button type="button" class="role-add-btn" onclick="list()"
						data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="alert1">
		<div
			class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
			<div class="modal-content">
				<div class="menu-title-header">
					<div class="modal-title" id="exampleModalLabel"
						style="text-align: center; color: white;">BANK OF BARODA</div>
				</div>
				<div class="modal-body" style="text-align: center">
					<p id="alertmsg1"></p>
					<button type="button" class="role-add-btn" onclick="fxrisk()"
						data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>
	<div class="modal fade" id="loader" data-backdrop="static"
		data-keyboard="false">
		<div
			class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
			<div class="modal-content" style="background: transparent;">
				<div class="modal-body" style="text-align: center">
					<div>
						<img th:src=@{/images/loader.gif} id="bfirelogo"
							style="width: 153px; height: auto; margin-left: 18px; background-color: transparent; border-color: transparent;"
							alt="Bornfire">
					</div>
				</div>
			</div>
		</div>
	</div>
	<div id="bob-loader" class="bob-loader" aria-hidden="true"
		role="status" aria-label="Loading">
		<div class="bob-loader-card">
			<img th:src="@{/images/bobn.png}" alt="Bank of Baroda"
				class="logo-imgs">
			<div class="flow-bar">
				<div class="flow-line"></div>
			</div>
		</div>
	</div>
	<div class="modal fade" id="downloadProcessingModal" tabindex="-1"
		role="dialog" aria-labelledby="downloadProcessingModalLabel"
		aria-hidden="true">
		<div
			class="modal-dialog modal-dialog-centered d-flex align-items-center"
			role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="downloadProcessingModalLabel">Download
						Processing...</h5>
				</div>
			</div>
		</div>
	</div>
	<!-- Download Message -->
	<div class="modal fade" id="customAlertModal" tabindex="-1"
		role="dialog" aria-labelledby="customAlertModalLabel"
		aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="customAlertModalLabel">Successfully</h5>
				</div>
				<div class="modal-body" id="customAlertBody"></div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary" data-dismiss="modal"
						onclick="list()">OK</button>
				</div>
			</div>
		</div>
	</div>

</body>
<script>
	$('#usertable').DataTable({
				    scrollX: true,
				    autoWidth: false,
				    paging: true,
				    searching: true,
				    lengthChange: false,
				    ordering: true,
				    pageLength: 10,
				    fixedHeader: true,

				    // Layout: search (left) + pagination (right)
				    dom: '<"d-flex justify-content-between align-items-center mb-2"f p>t',

				    // Optional: language tweak for better label
				    language: {
				      search: "Search:"
				    }
				  });
				  
</script>


<!-- Include this after your DataTable initialization script -->

<style>
/* Remove top margin/padding from DataTables parent containers */
#data {
	padding-top: 0 !important;
	margin-top: 0 !important;
}

.table-responsive {
	margin-top: 0 !important;
	padding-top: 0 !important;
}

/* Ensure DataTables filter (search box) doesn't have spacing above it */
div.dataTables_filter {
	margin-top: 0 !important;
	padding-top: 0 !important;
}

/* FIX: Make search label and box inline */
.dataTables_filter label {
	display: flex !important;
	align-items: center;
	gap: 8px; /* space between text and input */
	margin-bottom: 0 !important;
}

/* Style pagination buttons */
.dataTables_wrapper .dataTables_paginate .paginate_button {
	padding: 0px;
}

/* Optional: Style the search input */
.dataTables_filter input {
	margin-left: 5px;
	flex: 1;
}
</style>

<script>
function handleBankChange(select) {
    const selectedBank = select.value;

    if (!selectedBank) {
        // Clear the fields
        $('#bankSymbol').val('');
        $('#conventionalIslamic').val('');
        $('#localForeign').val('');
        $('#cbuaeTiering').val('');
        return;
    }

    $.ajax({
    	url: '/BCDRS/getBankDetails',
        type: 'GET',
        data: { bankName: selectedBank },
        success: function(data) {
            $('#bankSymbol').val(data.bankSymbol || '');
            $('#conventionalIslamic').val(data.conventionalIslamic || '');
            $('#localForeign').val(data.localForeign || '');
            $('#cbuaeTiering').val(data.cbuaeTiering || '');
        },
        error: function(xhr, status, error) {
            console.error('AJAX Error:', error);
          //  alert('Failed to fetch bank details.');
        }
    });
}
</script>
<script>
  function handleCountryChange(select) {
    const selectedCountry = select.value;
    const geoZoneInput = document.getElementById("cbuaeGeographicalZone");

    if (selectedCountry === "United Arab Emirates") {
      geoZoneInput.value = "GCC";
      geoZoneInput.readOnly = true;
    } else {
      geoZoneInput.value = "";
      geoZoneInput.readOnly = false;
    }
  }

  // Run on page load (for edit mode pre-filled forms)
  window.onload = function() {
    const countrySelect = document.getElementById("countryOfRisk");
    if (countrySelect) {
      handleCountryChange(countrySelect);
    }
  };
</script>

<script>
  const fieldRules = {
    // VARCHAR2 fields
		bank_name: 100,
		head_office_subsidiary: 50,
		subsidiary: 50,
		bank_symbol: 50,
		conventional_islamic: 50,
		cbuae_tiering1: 50,
		cbuae_tiering2: 50,
		cpty_name: 50,
		internal_counterparty_ref: 50,
		internal_transaction_ref: 50,
		underlying_asset_class: 50,
		derivatives_type: 50,
		transaction_rationale: 50,
		bundle_transaction: 10,
		back_to_back_transaction: 10,
		instruments_characteristics: 20,
		currency_valuation: 50,
		position: 20,
		notional_type: 20,
		cancellable: 1,
		cancellable_option_type: 20,
		notional1_currency: 10,
		pay_receive1: 10,
		benchmark_floating_rate1: 30,
		benchmark_rate_tenor1: 20,
		notional2_currency: 10,
		pay_receive2: 10,
		benchmark_floating_rate2: 30,
		benchmark_rate_tenor2: 20,
		uleg1_currency: 10,
		uleg1_pay_receive: 10,
		uleg1_benchmark: 30,
		uleg1_tenor: 20,
		underlying_leg1: 30,
		uleg1_details: 30,
		uleg2_currency: 10,
		uleg2_pay_receive: 10,
		uleg2_benchmark: 30,
		uleg2_tenor: 20,
		underlying_leg2: 30,
		uleg2_details: 30,
		cds_type: 20,
		cds_underlyings: 50,
		quanto: 1,
		future_type: 50,
		future_underlying_contract: 50,
		options_list: 50,
		option_type: 20,
		option_underlying_type: 10,
		option_underlying_details: 50,
		barrier_type: 20,
		

		// NUMBER(24,2) or similar precision fields
		aed_fx_spot_rate_conversion: "24,2",
		residual_maturity: "24,2",
		residual_maturity_rounded: "24,4",
		maturity_period: "24,2",
		notional1_assets: "24,2",
		coupon_fixed_rate1: "24,2",
		margin1: "24,2",
		notional2_liabilities: "24,2",
		coupon_fixed_rate2: "24,2",
		margin2: "24,2",
		clean_value_aed: "24,2",
		accrued_interest_aed: "24,2",
		dv01_aed: "24,2",
		br01_aed: "24,2",
		dollar_delta_aed: "24,2",
		dollar_vega_aed: "24,2",
		dollar_gamma_aed: "24,2",
		dollar_theta_aed: "24,2",
		uleg1_notional: "24,2",
		uleg1_coupon: "24,2",
		uleg1_margin: "24,2",
		uleg2_notional: "24,2",
		uleg2_coupon: "24,2",
		uleg2_margin: "24,2",
		uleg2_clean_value_aed: "24,2",
		uleg2_accrued_interest_aed: "24,2",
		uleg2_dv01_aed: "24,2",
		nominal: "24,2",
		cleanvalue_aed: "24,2",
		ir_dv01_aed: "24,2",
		cs01_aed: "24,2",
		future_qty: "24,2",
		future_contract_size: "24,2",
		future_contract_rate: "24,2",
		future_market_rate: "24,2",
		overallVarConfidenceInterval: "24,2",
		future_contract_valuation: "24,2",
		future_sensitivity_aed: "24,2",
		strike: "24,2",
		option_market_rate: "24,2",
		barrier_upper_range: "24,2",
		barrier_lower_range: "24,2",
		option_fair_value_aed: "24,2",
		option_dollar_delta: "24,2",
		option_dollar_vega: "24,2",
		option_dollar_gamma: "24,2",
		option_dollar_rho: "24,2",
		option_dollar_theta: "24,2",
		overall_mtm_aed: "24,2",
		irs_positive_mtm: "24,2",
		asset_swap_positive_mtm: "24,2",
		cds_positive_mtm: "24,2",
		future_contract_positive_mtm: "24,2",
		option_positive_mtm: "24,2",
		overall_positive_mtm: "24,2",
		individual_positive_contribution: "24,2",
		irs_negative_mtm: "24,2",
		asset_swap_negative_mtm: "24,2",
		cds_negative_mtm: "24,2",
		future_contract_negative_mtm: "24,2",
		option_negative_mtm: "24,2",
		overall_negative_mtm: "24,2",
		individual_negative_contribution: "24,2"
		
  };

  function showError(input, msg) {
    let span = document.getElementById(input.id + "-error");
    if (!span) {
      span = document.createElement("small");
      span.id = input.id + "-error";
      span.className = "text-danger";
      span.style.display = "block";
      input.parentNode.appendChild(span);
    }
    span.innerText = msg;
  }

  function clearError(input) {
    const span = document.getElementById(input.id + "-error");
    if (span) span.innerText = "";
  }

  function validateInput(event) {
    const input = event.target;
    const rule = fieldRules[input.id];
    const value = input.value.trim();

    if (!rule || value === "") {
      clearError(input);
      return;
    }

    if (typeof rule === "number" || !isNaN(rule)) {
      // VARCHAR2 Validation (check character length)
      if (value.length > rule) {
        showError(input, `Max ${rule} characters allowed`);
      } else {
        clearError(input);
      }
    } else if (typeof rule === "string" && rule.includes(",")) {
      // NUMBER(p,s) validation
      const [total, decimal] = rule.split(",").map(Number);
      const regex = /^\d+(\.\d+)?$/;

      if (!regex.test(value)) {
        showError(input, `Only numeric values allowed with max ${decimal} decimals`);
        return;
      }

      const [intPart, decPart = ""] = value.split(".");
      const intLen = intPart.replace(/^0+/, "").length;
      const decLen = decPart.length;

      if (intLen + decLen > total || decLen > decimal) {
        showError(input, `Max ${total - decimal} digits before and ${decimal} after decimal`);
      } else {
        clearError(input);
      }
    }
  }

  document.addEventListener("DOMContentLoaded", () => {
    for (const id in fieldRules) {
      const input = document.getElementById(id);
      if (input) {
        input.addEventListener("input", validateInput);

        // Add maxlength to VARCHAR2 fields only
        if (typeof fieldRules[id] === "number" || !isNaN(fieldRules[id])) {
          input.setAttribute("maxlength", fieldRules[id]);
        }
      }
    }
  });
</script>


</html>