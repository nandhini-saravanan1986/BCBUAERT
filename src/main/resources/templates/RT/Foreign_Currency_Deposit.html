<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">

<!-- 
CREATED BY	: SUJIDHARSHINI V
CREATED ON	: 04.06.2025
PURPOSE		: FX Risk Data Report
TESTED BY   : RAJALAKSHMI R
-->

<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- CSS -->
<link rel="stylesheet" type="text/css"
	th:href="@{/webjars/bootstrap/4.3.1/css/bootstrap.min.css}">
<link rel="stylesheet" type="text/css"
	th:href="@{/webjars/font-awesome/5.9.0/css/all.min.css}">
<link rel="stylesheet" type="text/css"
	th:href="@{/webjars/jquery-ui/1.12.1/jquery-ui.min.css}">
<link rel="stylesheet" type="text/css"
	th:href="@{/webjars/datatables/1.10.19/css/jquery.dataTables.min.css}">
<link rel="stylesheet" th:href="@{/css/CustomButton.css}" />
<link rel="icon" th:href="@{/favicon.ico}" type="image/x-icon" />

<!-- JavaScript -->
<!-- jQuery core (required first) -->


<!-- âœ… Your manually placed jQuery validation
	<script th:src="@{/webjars/jquery/3.4.1/jquery.min.js}"></script>
	 <script th:src="/jquery/jquery.validate.min.js"></script>
	 -->

<!-- jQuery (required first) -->
<script th:src="@{/webjars/jquery/3.4.1/jquery.min.js}"></script>

<!-- âœ… jQuery Validation -->
<script src="/webjars/jquery-validation/1.19.0/jquery.validate.min.js"
	th:src="@{/webjars/jquery-validation/1.19.0/jquery.validate.min.js}"></script>

<!-- Bootstrap + Others -->
<script th:src="@{/webjars/popper.js/1.14.7/umd/popper.min.js}"></script>
<script th:src="@{/webjars/bootstrap/4.3.1/js/bootstrap.min.js}"></script>
<script th:src="@{/webjars/jquery-ui/1.12.1/jquery-ui.min.js}"></script>
<script th:src="@{/webjars/jquery-form/4.2.2/jquery.form.min.js}"></script>
<script
	th:src="@{/webjars/datatables/1.10.19/js/jquery.dataTables.min.js}"></script>
<script
	th:src="@{/webjars/datatables/1.10.19/js/dataTables.bootstrap4.min.js}"></script>


<style>
body {
	font-family: 'Segoe UI', Arial, sans-serif;
	font-size: 14px;
}

.table .thead-light th {
	color: #495057;
	background-color: #e9ecef;
	border-color: #dee2e6;
	font-family: sans-serif;
}

.modal-backdrop {
	position: fixed;
	top: 0;
	left: 0;
	width: 120vw !important; /* ðŸ‘ˆ a bit wider than viewport */
	height: 120vh !important; /* ðŸ‘ˆ a bit taller than viewport */
	background-color: #000; /* ðŸ‘ˆ solid black base */
	opacity: 0.7 !important; /* ðŸ‘ˆ slightly darker overlay */
	z-index: 1062;
	/* ðŸ‘ˆ ensures it sits below modal but above everything else */
}

/* === ROLE PAGE CUSTOM HEADER === */
.role-page-header {
	background-color: #ffffff;
	padding: 15px 20px;
}

.role-page-title h4 {
	color: #003366;
	font-family: "Segoe UI", Arial, sans-serif;
	font-size: 20px;
	font-weight: 700;
	margin: 0;
}

.role-page-underline {
	width: 158px;
	height: 3px;
	background-color: #0073e6;
	border-radius: 2px;
	margin-top: 6px;
	box-shadow: 0 4px 12px rgba(0, 115, 230, 0.6); /* soft glow below */
}

/* Add Button Styling */
/* Base Button Style */
.role-add-btn {
	background: #ffffff; /* default white background */
	color: #005fa3; /* blue text */
	border: 2px solid #005fa3;
	border-radius: 25px;
	padding: 8px 18px;
	font-size: 13px;
	font-weight: 600;
	cursor: pointer;
	box-shadow: 0 2px 5px rgba(0, 64, 128, 0.1);
	transition: all 0.3s ease;
}

/* Hover effect */
.role-add-btn:hover {
	background: linear-gradient(135deg, #005fa3, #007bff);
	color: #fff;
	transform: translateY(-2px);
	box-shadow: 0 0 10px rgba(0, 102, 204, 0.4);
}

/* Active (clicked or selected) button */
.role-add-btn.active {
	background: linear-gradient(135deg, #005fa3, #007bff);
	color: #fff;
	border: none;
	box-shadow: 0 2px 8px rgba(0, 64, 128, 0.3);
	transform: translateY(-1px);
}

/* Optional: icon spacing */
.role-add-btn i {
	margin-right: 5px;
}
</style>

<style>
:root {
	--bob-orange: #0073e6;
	--bob-blue: #004080;
	--overlay-bg: rgba(255, 255, 255, 0.9);
}

/* Full-screen overlay */
.bob-loader {
	position: fixed;
	inset: 0;
	display: flex;
	align-items: center;
	justify-content: center;
	background: rgba(226, 232, 237, 0.6); /* lighter background */
	backdrop-filter: blur(8px); /* âœ… background blur */
	-webkit-backdrop-filter: blur(8px); /* Safari support */
	z-index: 9999;
	transition: opacity 0.25s ease, visibility 0.25s;
	opacity: 1;
	visibility: visible;
}

/* Hide when not active */
.bob-loader[aria-hidden="true"] {
	opacity: 0;
	visibility: hidden;
	pointer-events: none;
}

/* Loader card */
.bob-loader-card {
	display: flex;
	flex-direction: column;
	align-items: center;
}

/* Static logo */
.logo-imgs {
	height: 90px;
	object-fit: contain;
	display: block;
}

/* Flowing bar below logo */
.flow-bar {
	position: relative;
	width: 200px; /* âœ… increased width */
	height: 8px; /* slightly thicker for better visibility */
	background: #f1f1f1;
	border-radius: 4px;
	overflow: hidden;
	margin-top: 10px;
}

.flow-line {
	position: absolute;
	left: -40%;
	top: 0;
	width: 40%;
	height: 100%;
	background: linear-gradient(90deg, var(--bob-orange), var(--bob-blue));
	border-radius: 4px;
	animation: flowMove 1.2s linear infinite;
}

/* Animation for flowing line */
@keyframes flowMove { 0% {
	left: -40%;
}
100%
{
left
:
100%;
}
}
</style>

<script>
							function goBack() {
								document.getElementById("bob-loader").setAttribute("aria-hidden", "false");
							    window.history.back();
							}

							function goForward() {
								document.getElementById("bob-loader").setAttribute("aria-hidden", "false");
							    window.history.forward();
							}

							// Detect mouse near screen edges
							document.addEventListener('mousemove', function(e) {
							    const backBtn = document.getElementById('floatingBackBtn');
							    const forwardBtn = document.getElementById('floatingForwardBtn');
							    const screenWidth = window.innerWidth;

							    // Left edge (back)
							    if (e.clientX < 50) {
							        backBtn.classList.add('show');
							    } else {
							        backBtn.classList.remove('show');
							    }

							    // Right edge (forward)
							    if (screenWidth - e.clientX < 50) {
							        forwardBtn.classList.add('show');
							    } else {
							        forwardBtn.classList.remove('show');
							    }
							});
							</script>

<style>
/* Shared styles for both buttons */
#floatingBackBtn, #floatingForwardBtn {
	position: fixed;
	top: 50%;
	background-color: #0073e6;
	border: none;
	color: white;
	font-size: 20px;
	border-radius: 50%;
	width: 45px;
	height: 45px;
	display: flex;
	align-items: center;
	justify-content: center;
	opacity: 0;
	pointer-events: none;
	transition: all 0.4s ease;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
	z-index: 999;
}

/* Back button */
#floatingBackBtn {
	left: -50px; /* hidden off-screen */
}

/* Forward button */
#floatingForwardBtn {
	right: -50px; /* hidden off-screen */
}

/* Show when near edge */
#floatingBackBtn.show {
	left: 20px;
	opacity: 1;
	pointer-events: auto;
}

#floatingForwardBtn.show {
	right: 20px;
	opacity: 1;
	pointer-events: auto;
}

/* Hover animation */
#floatingBackBtn:hover, #floatingForwardBtn:hover {
	background-color: #005bb5;
	transform: scale(1.1);
}
</style>


<style>
.btns {
	float: right;
	margin: 5px;
}

.col-sm-5 {
	padding-bottom: 15px;
}

.list-body {
	padding: 0px;
}

.error {
	color: red;
	padding-left: 10px;
}

.formline {
	padding-bottom: 15px;
}

.btn-primary {
	background-color: #E77400;
	border-color: #0c0c0c;
}

.btn-primary:not(:disabled):not(.disabled).active, .btn-primary:not(:disabled):not(.disabled):active,
	.show>.btn-primary.dropdown-toggle {
	color: #fff;
	background-color: #cc0000;
	border-color: #161617;
}

#finusertb {
	width: 460px;
}

.dataTables_wrapper .dataTables_paginate .paginate_button {
	padding: 0px;
}
</style>




<style>
.card {
	box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
	border-radius: 8px;
}

.card-header h5 {
	font-size: 22px;
	color: #fff;
	font-weight: 600;
}

.nav-tabs .nav-link {
	font-weight: 500;
	border: 1px solid #dee2e6;
	border-bottom: none;
	border-radius: 4px 4px 0 0;
	background-color: #f1f1f1;
	margin-right: 5px;
}

.nav-tabs .nav-link.active {
	background-color: #ffffff;
	border-color: #dee2e6 #dee2e6 #ffffff;
}

.table-responsive {
	border: 1px solid #dee2e6;
	border-radius: 4px;
}

.table-hover tbody tr:hover {
	background-color: #f3f6f9;
}

thead th {
	position: sticky;
	top: 0;
	background-color: #e9ecf0;
	z-index: 1;
}

.card-footer {
	padding: 10px;
	border-top: 1px solid #ccc;
}

.btn-xs {
	padding: 4px 12px;
	font-size: 14px;
	border-radius: 4px;
}

/* #usertable th, #usertable td {
	vertical-align: middle;
	text-align: left;
	font-size: 17px;
	font-family: Verdana, sans-serif;
} */

.fa-edit:hover {
	color: #28a745;
	transform: scale(1.1);
}

td {
	border: 1px solid rgb(0, 164, 166);
	overflow: hidden;
	white-space: nowrap;
	text-overflow: ellipsis;
}
</style>


<style>
.form-group {
	position: relative;
	margin-bottom: 1.5rem;
}

.form-control {
	width: 100%;
	border: 2px solid #ccc;
	border-radius: 8px;
	font-size: 1rem;
	outline: none;
	background: transparent;
	transition: border-color 0.3s ease, padding-top 0.3s ease;
}

.error {
	color: red;
	padding-top: 15px;
}

.form-control:focus {
	border-color: #007bff;
}

.form-legend {
	position: absolute;
	top: 50%;
	left: 15px;
	transform: translateY(-50%);
	font-size: 1rem;
	color: #aaa;
	background: white;
	padding: 0 5px;
	pointer-events: none;
	transition: 0.3s ease;
}

/* When input or select is focused or has a value, move the label up */
.form-control:focus ~ .form-legend, .form-control:not(:placeholder-shown) 
	~ .form-legend {
	top: -8px;
	font-size: 1rem;
	color: #007bff;
}

/* Hover effect when the input/select is focused */
.form-control:focus:hover ~ .form-legend {
	color: #0056b3; /* Darker shade of blue on hover */
}

/* Ensure the label returns to the normal color after focus or hover is removed */
.form-control:not(:focus) ~ .form-legend {
	color: #aaa; /* Normal label color */
}
</style>

<style>
/* Red border for invalid inputs */
input.error, select.error {
	border: 2px solid red !important;
}

/* Error message style */
label.error {
	color: red;
	font-size: 0.85em;
	margin-top: 5px;
	display: block;
}
</style>
<script th:inline="javascript">
	

	function home() {
		document.getElementById("bob-loader").setAttribute("aria-hidden", "false");
		location.href = 'Dashboard'
	}

	function back() {
		document.getElementById("bob-loader").setAttribute("aria-hidden", "false");

		window.history.back();
	}

	function list() {
		document.getElementById("bob-loader").setAttribute("aria-hidden", "false");
		location.href = 'Foreign_Currency_Deposit?formmode=list';
	}

	
	$(document).ready(function () {
	    // On modal close, redirect to your controller method path
	    $('#alert').on('hidden.bs.modal', function () {
	        window.location.href = './Fx_Risk_Data';
	    });
	});
	
	function fxrisk() {
		location.href = 'Foreign_Currency_Deposit';
	}
	$(document).ready(function () {
	    // On modal close, redirect to your controller method path
	    $('#alert').on('hidden.bs.modal', function () {
	        window.location.href = './Foreign_Currency_Deposit';
	    });
	});
	
	

	function submitForm1() {
		$('#nostroForm').validate({
	        messages: {
	            portfolioDate: "Please provide Portfolio Date",
	            submittingInstitution: "Please provide Submitting Institution"
	        }
	    });

	    if ($("#nostroForm").valid()) {
	    	var formmode = /*[[${formmode}]]*/null;

	    	var report_name = 'CBUAE_Cross_Currency_Funding_Spread_Template';
	    	document.getElementById("bob-loader").setAttribute("aria-hidden", "false");

	        var url = "./createNostroData?report_name=" + report_name;

	        $("#nostroForm").attr('action', url);

	        var options = {
	            success: showResponse,
	            error: function (xhr, status, error) {
	                console.log("Error occurred: ", error);
	                console.log(xhr.responseText); // for debugging
	                document.getElementById("bob-loader").setAttribute("aria-hidden", "true");
	                $("#alertmsg").text("Something went wrong while submitting the form.");
	                $('#alert').modal("toggle");
	            }
	        };

	        $("#nostroForm").ajaxSubmit(options);

	        function showResponse(responseText, statusText, xhr, $form) {
	        	document.getElementById("bob-loader").setAttribute("aria-hidden", "true");
	            $("#alertmsg").text(responseText);
	            $('#alert').modal("toggle");
	        }
	    }
	};
	/*	function updateform() {
	    console.log("updateform function called"); // Debug log
	    
	    // Retrieve form and field values
	    var bankDate = document.getElementById('bank_date').value.trim();
	    var bankName = document.getElementById('bank_name').value.trim();
	    
	    var isValid = true;
	    var mandatoryMessage = "Please fill the required field(s)";
	    
	    // Validate each field and highlight if empty
	    function validateField(fieldSelector, errorMessage) {
	        var field = $(fieldSelector);
	        if (!field.val().trim()) {
	            field.css("border-color", "red").attr("title", errorMessage);
	            isValid = false;
	        } else {
	            field.css("border-color", "").attr("title", ""); // Reset styles
	        }
	    }
	    
	    // Validate required fields
	    validateField('#bank_date', "Please provide Data Date");
	    validateField('#bank_name', "Please provide Bank Name");
	    
	    // Additional validation for bank name length
	    if (bankName && bankName.length < 2) {
	        $('#bank_name').css("border-color", "red").attr("title", "Bank Name must be at least 2 characters");
	        isValid = false;
	    }
	    
	    // If validation fails, show alert and stop form submission
	    if (!isValid) {
	        $("#alertmsg").text(mandatoryMessage);
	        $("#alert").modal("show");
	        return;
	    }
	    
	    console.log("Validation passed, submitting form"); // Debug log
	    
	    // Show loader and submit form traditionally
	    $("#loader1").modal("show");
	    
	    // Use jQuery form plugin for traditional submit with callback
	    var options = {
	        url: './updateFxriskdata',
	        type: 'POST',
	        beforeSubmit: function() {
	            console.log("Form being submitted");
	            return true;
	        },
	        success: function(responseText, statusText, xhr, $form) {
	            console.log("Form submitted successfully");
	            $("#loader1").modal("hide");
	            
	            // Show success message
	            $("#alertmsg").text("Updated Successfully");
	            $("#alert").modal("show");
	            
	            // Redirect after showing message
	            setTimeout(function() {
	                window.location.href = "./Fx_Risk_Data?formmode=list";
	            }, 1500);
	        },
	        error: function(xhr, status, error) {
	            console.log("Form submission error:", error);
	            $("#loader1").modal("hide");
	            $("#alertmsg").text("Error: " + error);
	            $("#alert").modal("show");
	        }
	    };
	    
	    $("#Fxriskdata").ajaxSubmit(options);
	}*/
	
	function updateform(event) {
    event.preventDefault();
    
    console.log("updateform function called");

    // Show loader
    document.getElementById("bob-loader").setAttribute("aria-hidden", "false");

    // Check if SI_NO is present before sending
    var formData = $('#Foreigncurrencydeposit').serialize(); // Make sure this ID is correct (capital F)

    console.log("Serialized Data:", formData); // Debug

    $.ajax({
        url: './updateForeignCurrencyDeposit',
        type: 'POST',
        data: formData,
        success: function(response) {
            console.log("Server response:", response);
            document.getElementById("bob-loader").setAttribute("aria-hidden", "true");

            $("#alertmsg").text(response);
            $("#alert").modal("toggle");

            if (response.includes("successful")) {
                setTimeout(function() {
                    window.location.href = "./Foreign_Currency_Deposit?formmode=list";
                }, 1500);
            }
        },
        error: function(xhr, status, error) {
            console.error("Error in modify:", error);
            document.getElementById("bob-loader").setAttribute("aria-hidden", "true");
            $("#alertmsg").text("Error: " + error);
            $("#alert").modal("show");
        }
    });
}

	</script>

<script>
		$(document).ready(function () {
			$("#fxriskForm").validate({
				errorClass: "error", // use 'error' class for styling
				errorElement: "label", // wrap error messages in <label>

				// Place the error after the input field
				errorPlacement: function (error, element) {
					if (element.parent('.form-group').length) {
						error.insertAfter(element); // default
					} else {
						error.insertAfter(element);
					}
				},

				// Highlight and unhighlight fields
				highlight: function (element) {
					$(element).addClass("error");
				},
				unhighlight: function (element) {
					$(element).removeClass("error");
				},

				// On successful validation, run this
				submitHandler: function (form) {
					submitForm(); // your custom submit function
				}
			});
		});
	</script>

</head>


<script>
  function navigateToTab(tabId) {
	  document.getElementById("bob-loader").setAttribute("aria-hidden", "false");
    
    if (tabId === 'data') {
        window.location.href = 'Foreign_Currency_Deposit?formmode=list';
        //$("#loader").modal("hide");
    } else if (tabId === 'datacontrols') {
        window.location.href = 'Foreign_Currency_Deposit?formmode=add';
        //$("#loader").modal("hide");
    } else if (tabId === 'dataimpact') {
        window.location.href = 'Impact_Analysis?formmode=list';
        //$("#loader").modal("hide");
    }
}


  function handleClick(tabId) {
    // Remove active class from all buttons
    document.querySelectorAll('.role-add-btn').forEach(btn => btn.classList.remove('active'));
    document.getElementById(tabId + '-btn').classList.add('active');

    // Hide all panes
    document.querySelectorAll('.tab-pane').forEach(pane => pane.classList.remove('show', 'active'));
    document.getElementById(tabId).classList.add('show', 'active');
  }

  // On page load, detect formmode and show corresponding tab
  window.addEventListener('DOMContentLoaded', function () {
    const params = new URLSearchParams(window.location.search);
    const formmode = params.get('formmode');

    if (formmode === 'list') {
      handleClick('data');
    } else {
      handleClick('datacontrols'); // default or formmode=add
    }
  });
</script>




<script>
     
     function downloadForeigncurrencyExcel() {
    		// 1. Show the loader modal
    		document.getElementById("bob-loader").setAttribute("aria-hidden", "false");

    		$.ajax({
    			url: './downloadForeigncurrencyExcel',
    			type: 'GET',
    			xhrFields: {
    				responseType: 'blob'
    			},
    			success: function (data) {
    				// Always hide loader first
    				document.getElementById("bob-loader").setAttribute("aria-hidden", "true");

    				let message = '';

    				if (data && data.size > 100) {
    					const blob = new Blob([data], { type: 'application/vnd.ms-excel' });
    					const url = window.URL.createObjectURL(blob);
    					const a = document.createElement('a');
    					a.style.display = 'none';
    					a.href = url;
    					a.download = 'CBUAE_Foreign_Currency_Deposit_Template.xls';
    					document.body.appendChild(a);

    					a.click();

    					window.URL.revokeObjectURL(url);
    					document.body.removeChild(a);

    					message = 'CBUAE_Foreign_Currency_Deposit_Template.xls has been downloaded successfully.';
    				} else {
    					message = 'No data available to download.';
    				}

    				// Show custom alert modal with the message
    				$('#alertmsg').text(message);
    				$('#alert').modal('show');
    			},
    			error: function (jqXHR, textStatus, errorThrown) {
    				document.getElementById("bob-loader").setAttribute("aria-hidden", "true");

    				console.error("Download failed:", textStatus, errorThrown);

    				// Show error message in your custom alert
    				$('#alertmsg').text('An error occurred while downloading ImpactAnalysis.xls.');
    				$('#alert').modal('show');
    			}
    		});
    	}


</script>

<script>

    function submitForm() {
    	document.getElementById("bob-loader").setAttribute("aria-hidden", "false");

        const reportName = 'CBUAE_Fx_Risk_Data_Template';
        const submitUrl = './createDataControl?report_name=' + encodeURIComponent(reportName);
        const formData = $("#fxriskForm").serialize();
	
        $.ajax({
            url: submitUrl,
            type: "POST",
            data: formData,
            success: function (response) {
            	document.getElementById("bob-loader").setAttribute("aria-hidden", "true");

            	$("#alertmsg1").text(response);
                $("#alert1").modal("toggle");
                //location.href = 'Nostro_Account_Bal';
            },
            error: function (xhr, status, error) {
            	document.getElementById("bob-loader").setAttribute("aria-hidden", "true");

                console.error("Error:", error);
                alert("Error occurred: " + error);
            }
        });
    }


</script>
<title>RiskInsights</title>
<body>
	<div class="container-fluid"
		style="padding-left: 0px; padding-right: 0px;">
		<!-- <div class="row"> -->

			<div th:insert="XBRLHeaderMenu :: header"></div>

			<div class="role-page-header d-flex justify-content-between align-items-center"
				th:if="${formmode == 'list' or formmode == 'add' or formmode =='null' }">
				<div class="float-left role-page-title" >
					<h4>CROSS CURRENCY FUNDING SPREAD</h4>
					<div
					style="width: 350px; height: 3px; background-color: #0073e6; border-radius: 2px; margin-top: 6px; box-shadow: 0 4px 12px rgba(0, 115, 230, 0.6);"></div>
			
				</div>


			</div>
			<!-- -------------------User List Starts----------------------------------------------------- -->
			<div style="padding-right: 10px; padding-left: 20px;"
				th:if="${formmode == 'list' or formmode == 'add' or formmode =='null' }">





				<!-- Tabs -->
				<div class="role-page-header d-flex justify-content-between align-items-center">
				<div class="float-left">
					<button class="role-add-btn" id="datacontrols-btn"
						onclick="navigateToTab('datacontrols')">Data Controls</button>
					<button class="role-add-btn" id="template-btn"
						onclick="handleClick('template')">Template Instructions</button>
					<button class="role-add-btn" id="data-btn"
						onclick="navigateToTab('data')">Foreign Curr Deposit</button>
					<button class="role-add-btn" id="dataimpact"
						onclick="navigateToTab('dataimpact')">Impt Anlysis</button>
					</div>
					<div class="float-right">
						<button th:if="${formmode} =='list'" type="button"
							class="role-add-btn" onclick="downloadForeigncurrencyExcel();">
							<i class="fa fa-download"></i> Download
						</button>
					</div>
				</div>






				<div class="tab-content" id="myTabContent" style="margin-top: 15px;"
					th:if="${formmode} =='null'">
					<div class="tab-pane fade show active" id="datacontrols"
						role="tabpanel">

						<div class="row">
							<div class="col-sm-12 finuserapply">
								<form id="fxriskForm" method="post" autocomplete="off">
									<div class="card-body"
										style="max-height: 450px; overflow-y: auto">


										<input autocomplete="false" name="hidden" type="text"
											style="display: none;">
										<div class="form-group" style="border: none">
											<div class="row formline">
												<div class="col-sm-1"></div>
												<div class="form-group col-md-4">
													<select id="submittingInstitution"
														name="submittingInstitution" class="form-control" required>
														<option value="">-- Select Institution --</option>
														<option value="Bank of Baroda">Bank of Baroda</option>
													</select> <label for="submittingInstitution" class="form-legend">Submitting
														Institution</label>
												</div>


												<div class="col-sm-1"></div>

												<div class="form-group col-md-4">
													<input type="date" id="portfolioDate" name="portfolioDate"
														class="form-control" placeholder=" " required /> <label
														for="portfolioDate" class="form-legend">Portfolio
														date</label>
												</div>
											</div>

											<!-- Contact Employee 1 Name / Title -->
											<!-- Contact Employee 1 Group -->
											<div class="form-group"
												style="border: 1px solid #e0e0e0; padding: 15px; margin-bottom: 20px; border-radius: 5px;">
												<div class="row formline">
													<div class="col-sm-12">
														<label style="font-weight: bold; color: #007B8A;">Contact
															Details(Employee 1)</label>
													</div>
												</div>
												<div class="row formline">
													<div class="form-group col-md-4">
														<input type="text" id="contactEmployee1Name1"
															name="contactEmployee1Name1" class="form-control"
															placeholder=" " required /> <label
															for="contactEmployee1Name1" class="form-legend">Name</label>
													</div>


													<div class="form-group col-md-4">
														<input type="text" id="contactEmployee1Title1"
															name="contactEmployee1Title1" class="form-control"
															placeholder=" " required /> <label
															for="contactEmployee1Title1" class="form-legend">Title</label>
													</div>



													<div class="form-group col-md-4">
														<input type="email" id="contactEmployee1Email1"
															name="contactEmployee1Email1" class="form-control"
															placeholder=" " required /> <label
															for="contactEmployee1Email1" class="form-legend">Email</label>
													</div>
													<div class="col-sm-3"></div>

												</div>
											</div>
											<div class="form-group"
												style="border: 1px solid #e0e0e0; padding: 15px; margin-bottom: 20px; border-radius: 5px;">
												<div class="row formline">
													<div class="col-sm-12">
														<label style="font-weight: bold; color: #007B8A;">Contact
															Details(Employee 2)</label>
													</div>
												</div>
												<div class="row formline">
													<div class="form-group col-md-4">
														<input type="text" id="contactEmployee2Name2"
															name="contactEmployee2Name2" class="form-control"
															placeholder=" " required /> <label
															for="contactEmployee2Name2" class="form-legend">Name</label>
													</div>


													<div class="form-group col-md-4">
														<input type="text" id="contactEmployee2Title2"
															name="contactEmployee2Title2" class="form-control"
															placeholder=" " required /> <label
															for="contactEmployee2Title2" class="form-legend">Title</label>
													</div>



													<div class="form-group col-md-4">
														<input type="email" id="contactEmployee2Email2"
															name="contactEmployee2Email2" class="form-control"
															placeholder=" " required /> <label
															for="contactEmployee2Email2" class="form-legend">Email</label>
													</div>
													<div class="col-sm-3"></div>

												</div>
												<!-- Contact Employee 2 Group -->
											</div>
											<div class="form-group"
												style="border: 1px solid #e0e0e0; padding: 15px; margin-bottom: 20px; border-radius: 5px;">
												<div class="row formline">
													<div class="col-sm-12">
														<label style="font-weight: bold; color: #007B8A;">Sign
															Off</label>
													</div>
												</div>

												<!-- Sign-off CRO Name / Email -->
												<div class="row formline">
													<div class="col-sm-1"></div>
													<div class="form-group col-md-4">
														<input type="text" id="signOffCroName"
															name="signOffCroName" class="form-control"
															placeholder=" " required /> <label for="signOffCroName"
															class="form-legend">CRO Name</label>
													</div>
													<div class="col-sm-1"></div>
													<div class="form-group col-md-4">
														<input type="email" id="signOffCroEmail"
															name="signOffCroEmail" class="form-control"
															placeholder=" " required /> <label for="signOffCroEmail"
															class="form-legend">CRO Email</label>
													</div>

												</div>

												<!-- Sign-off CFO Name / Email -->
												<div class="row formline">
													<div class="col-sm-1"></div>
													<div class="form-group col-md-4">
														<input type="text" id="signOffCfoName"
															name="signOffCfoName" class="form-control"
															placeholder=" " required /> <label for="signOffCfoName"
															class="form-legend">CFO Name</label>
													</div>

													<div class="col-sm-1"></div>
													<div class="form-group col-md-4">
														<input type="email" id="signOffCfoEmail"
															name="signOffCfoEmail" class="form-control"
															placeholder=" " required /> <label for="signOffCfoEmail"
															class="form-legend">CFO Email</label>
													</div>

												</div>

												<!-- Sign-off Head of Treasury Name / Email -->
												<div class="row formline">
													<div class="col-sm-1"></div>
													<div class="form-group col-md-4">
														<input type="text" id="signOffHeadOfTreasuryName"
															name="signOffHeadOfTreasuryName" class="form-control"
															placeholder=" " required /> <label
															for="signOffHeadOfTreasuryName" class="form-legend">Head
															of Treasury Name</label>
													</div>

													<div class="col-sm-1"></div>
													<div class="form-group col-md-4">
														<input type="email" id="signOffHeadOfTreasuryEmail"
															name="signOffHeadOfTreasuryEmail" class="form-control"
															placeholder=" " required /> <label
															for="signOffHeadOfTreasuryEmail" class="form-legend">Head
															of Treasury Email</label>
													</div>
												</div>
											</div>

										</div>
								</form>
							
						<div class="card-footer text-center"style="padding-bottom: 18px;">
							<!-- <button type="button" class="custom-tab-btn" onclick="home();">
								<i class="fa fa-home"></i> Home
							</button> -->


							<button th:if="${formmode == 'null' or formmode == 'add'}"
								type="button" class="role-add-btn" onclick="submitForm()">Save</button>


							<!-- <button type="button" class="custom-tab-btn" onclick="back();">
								<i class="fa fa-arrow-left"></i> Back
							</button> -->
</div>
						</div>
						</div>
					</div>
				</div>

				<!-- --------------------------------------DATA CONTROL ENDS--------------------------------------------- -->

				<!-- --------------------------------------TEMPLATE STARTS--------------------------------------------- -->

				<div class="tab-pane fade" id="template" role="tabpanel"
					th:if="${formmode == 'null'}">
					<p>Templates tabs</p>
					<div class="card-footer text-center"
						style="background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(8px); padding: 10px; border-top: 2px solid #ccc;">
						<!-- <button type="button" class="custom-tab-btn" onclick="home();">
							<i class="fa fa-home"></i> Home
						</button> -->


						<!-- <button th:if="${formmode == 'null' or formmode == 'add'}"  type="button" class="custom-tab-btn"
                  onclick="submitForm()">Save</button>-->


					<!-- 	<button type="button" class="custom-tab-btn" onclick="back();">
							<i class="fa fa-arrow-left"></i> Back
						</button> -->

					</div>
				</div>

				<!-- --------------------------------------TEMPLATE ENDS--------------------------------------------- -->



				<!-- -----------------------------------DATA LIST STARTS -------------------------------------------- -->
				<div class="tab-pane fade" id="data" role="tabpanel">
					<!-- Move your existing table content here -->

					<!-- 	<div class="row">
				<div class="col-sm-12">
					<div class="container-fluid">
   -->




					<div class="table-responsive"
						style="max-height: 400px; overflow: auto; border: none;">
						<table id="usertable"
							class="table table-bordered table-striped table-hover"
							style="min-width: 2000px; ">

							<thead class="thead-light">

								<tr>
									<th style="text-align: center;width: 100px;">Action</th>

									<th>Date</th>
									<th>Bank Name</th>
									<th>Head Office Subsidiary</th>
									<th>Subsidiary</th>
									<th>Bank Symbol</th>
									<th>Conventional/Islamic</th>
									<th>Local/Foreign</th>
									<th>CBUAE Tiering</th>
									<th>Deposit Internal Reference</th>
									<th>On-Balance Sheet Deposit Type</th>
									<th>Funding Counterparty</th>
									<th>Counterparty Type</th>
									<th>Industry (GCIS)</th>
									<th>Counterparty Country of Risk</th>
									<th>CBUAE Regional zone</th>
									<th>Nominal</th>
									<th>Nominal in AED</th>
									<th>Currency</th>
									<th>Rate Type</th>
									<th>Deposit Fixed Rate/Administrative Rate (%)</th>
									<th>Benchmark Floating Rate</th>
									<th>Tenor Floating Rate</th>
									<th>Spread Over Benchmark Rate</th>
									<th>Maturity Date</th>
									<th>Tenor (Mths)</th>
									<th>Maturity Period</th>

								</tr>
							</thead>
							<tbody >


								<tr th:each="data : ${branchList}">
									<td style="text-align: center;min-width: 100px;"><a
										th:href="@{'/Foreign_Currency_Deposit?formmode=edit&SI_NO=' + ${data.SI_NO}}">

											<i class="fa fa-edit" style="color: #007bff;"></i>
									</a></td>
									<td th:text="${#dates.format(data.date, 'dd-MM-yyyy')}"></td>
									<td th:text="${data.bankName}"></td>
									<td th:text="${data.headOfficeSubsidiary}"></td>
									<td th:text="${data.subsidiary}"></td>
									<td th:text="${data.bankSymbol}"></td>
									<td th:text="${data.conventionalOrIslamic}"></td>
									<td th:text="${data.localOrForeign}"></td>
									<td th:text="${data.cbuaeTiering}"></td>
									<td th:text="${data.depositInternalReference}"></td>
									<td th:text="${data.onBalanceSheetDepType}"></td>
									<td th:text="${data.fundingCounterParty}"></td>
									<td th:text="${data.counterpartyType}"></td>
									<td th:text="${data.industryGcis}"></td>
									<td th:text="${data.counterpartyCountryRisk}"></td>
									<td th:text="${data.cbuaeRegionalZone}"></td>
									<!-- <td th:text="${data.nominal}"></td>
          <td th:text="${data.nominalInAed}"></td>-->

									<td style="text-align: right;"
										th:text="${#numbers.formatDecimal(data.nominal, 1, 'COMMA', 2, 'POINT')}"></td>
									<td style="text-align: right;"
										th:text="${#numbers.formatDecimal(data.nominalInAed, 1, 'COMMA', 2, 'POINT')}"></td>
									<td th:text="${data.currency}"></td>
									<td th:text="${data.rateType}"></td>
									<td style="text-align: right;"
										th:text="${#numbers.formatDecimal(data.depositFixedRateOrAdministrativeRate, 1, 'COMMA', 2, 'POINT')}"></td>
									<td th:text="${data.benchmarkFloatingRate}"></td>
									<td style="text-align: right;"
										th:text="${#numbers.formatDecimal(data.tenorFloatingRate, 1, 'COMMA', 2, 'POINT')}"></td>
									<td style="text-align: right;"
										th:text="${#numbers.formatDecimal(data.spreadOverBenchmarkRate, 1, 'COMMA', 2, 'POINT')}"></td>
									<td th:text="${#dates.format(data.maturityDate, 'dd-MM-yyyy')}"></td>
									<td style="text-align: right;"
										th:text="${#numbers.formatDecimal(data.tenorMths, 1, 'COMMA', 2, 'POINT')}"></td>
									<td style="text-align: right;"
										th:text="${#numbers.formatDecimal(data.maturityPeriod, 1, 'COMMA', 2, 'POINT')}"></td>




								</tr>

							</tbody>
						</table>
					</div>


					<div class="card-footer text-center"
						style="background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(8px); padding: 10px; border-top: 2px solid #ccc;">
						<!-- <button type="button" class="custom-tab-btn" onclick="home();">
							<i class="fa fa-home"></i> Home
						</button> -->


						<button th:if="${formmode == 'null' or formmode == 'add'}"
							type="button" class=role-add-btn onclick="submitForm()">Save</button>


						<!-- <button type="button" class="custom-tab-btn" onclick="back();">
							<i class="fa fa-arrow-left"></i> Back
						</button> -->

					</div>

				</div>



			</div>

			<!------------------ edit starts-------------------------------------------------------------->

			<div th:if="${formmode}=='edit'" style="align-items: center">

				<div class="row">
					<form th:action="@{/updateForeignCurrencyDeposit}"
						th:object="${foreigncurrencydeposit}" method="post"
						id="Foreigncurrencydeposit">
						<div class="card" style="margin-left: 15px; margin-right: 15px;">
							<div class="role-page-header d-flex justify-content-between align-items-center">
								<div class="role-page-title">
									<h4>Foreign Currency Deposit - Edit</h4>
									<div
										style="width: 297px; height: 3px; background-color: #0073e6; border-radius: 2px; margin-top: 6px; box-shadow: 0 4px 12px rgba(0, 115, 230, 0.6);"></div>
									
								</div>

							</div>
							<div class="card-body"
								style="max-height: 500px; overflow-y: auto;">



								<input type="hidden" th:field="*{SI_NO}" />

								<div class="form-group row">
									<label class="col-sm-2 col-form-label">Date</label>
									<div class="col-sm-4">
										<input type="date" class="form-control" th:field="*{date}"
											required readonly />
									</div>
									<label class="col-sm-2 col-form-label">Bank Name</label>
									<div class="col-sm-4">
										<select class="form-control" th:field="*{bankName}"
											onchange="handleBankChange(this)">
											<option value="">-- Select Bank --</option>
											<option th:each="bank : ${bankList}"
												th:value="${bank.bankName}" th:text="${bank.bankName}"></option>
										</select>
									</div>
								</div>

								<div class="form-group row">
									<label class="col-sm-2 col-form-label">Head Office
										Subsidiary</label>
									<div class="col-sm-4">
										<select class="form-control"
											th:field="*{headOfficeSubsidiary}">
											<option value="" disabled selected>-- Select --</option>
											<option value="Head Office">Head Office</option>
											<option value="Subsidiary">Subsidiary</option>
										</select>
									</div>
									<label class="col-sm-2 col-form-label">Subsidiary</label>
									<div class="col-sm-4">
										<input type="text" class="form-control"
											th:field="*{subsidiary}" id="subsidiary" />
									</div>
								</div>

								<div class="form-group row">
									<label class="col-sm-2 col-form-label">Bank Symbol</label>
									<div class="col-sm-4">
										<input type="text" class="form-control"
											th:field="*{bankSymbol}" id="bankSymbol" readonly />
									</div>
									<label class="col-sm-2 col-form-label">Conventional/Islamic</label>
									<div class="col-sm-4">
										<input type="text" class="form-control"
											th:field="*{conventionalOrIslamic}" id="conventionalIslamic"
											readonly />
									</div>
								</div>

								<div class="form-group row">
									<label class="col-sm-2 col-form-label">Local/Foreign</label>
									<div class="col-sm-4">
										<input type="text" class="form-control"
											th:field="*{localOrForeign}" id="localForeign" readonly />
									</div>
									<label class="col-sm-2 col-form-label">CBUAE Tiering</label>
									<div class="col-sm-4">
										<input type="text" class="form-control"
											th:field="*{cbuaeTiering}" id="cbuaeTiering" readonly />
									</div>
								</div>

								<div class="form-group row">
									<label class="col-sm-2 col-form-label">Deposit Internal
										Reference</label>
									<div class="col-sm-4">
										<input type="text" class="form-control"
											th:field="*{depositInternalReference}"
											id="depositInternalReference" />
									</div>
									<label class="col-sm-2 col-form-label">On-Balance Sheet
										Deposit Type</label>
									<div class="col-sm-4">
										<select class="form-control"
											th:field="*{onBalanceSheetDepType}">
											<option value="" disabled selected>-- Select --</option>
											<option value="Term Deposit">Term Deposit</option>
											<option value="CASA">CASA</option>
										</select>
									</div>
								</div>

								<div class="form-group row">
									<label class="col-sm-2 col-form-label">Funding
										Counterparty</label>
									<div class="col-sm-4">
										<input type="text" class="form-control"
											th:field="*{fundingCounterParty}" id="fundingCounterParty" />
									</div>
									<label class="col-sm-2 col-form-label">Counterparty
										Type</label>
									<div class="col-sm-4">
										<select class="form-control" th:field="*{counterpartyType}"
											id="counterpartyType">
											<option value="" disabled selected>-- Select --</option>
											<option value="Corporate">Corporate</option>
											<option value="FI">FI</option>
											<option value="NBFI">NBFI</option>
											<option value="PSE Commercial">PSE Commercial</option>
											<option value="Retail">Retail</option>
											<option value="SME">SME</option>
											<option value="Sovereign">Sovereign</option>
											<option value="Other">Other</option>
											<option value="Multilateral Development Banks">Multilateral
												Development Banks</option>
										</select>
									</div>
								</div>

								<div class="form-group row">
									<label class="col-sm-2 col-form-label">Industry (GCIS)</label>
									<div class="col-sm-4">
										<select class="form-control" th:field="*{industryGcis}">
											<option value="" disabled selected>Select Industry</option>
											<option value="Communication Services">Communication
												Services</option>
											<option value="Consumer Discretionary">Consumer
												Discretionary</option>
											<option value="Consumer Staples">Consumer Staples</option>
											<option value="Energy">Energy</option>
											<option value="Financials">Financials</option>
											<option value="Health Care">Health Care</option>
											<option value="Industrials">Industrials</option>
											<option value="Information Technology">Information
												Technology</option>
											<option value="Materials">Materials</option>
											<option value="Real Estate">Real Estate</option>
											<option value="Utilities">Utilities</option>
											<option value="Other">Other</option>
										</select>
									</div>

									<label class="col-sm-2 col-form-label">Counterparty
										Country of Risk</label>
									<div class="col-sm-4">
										<select class="form-control"
											th:field="*{counterpartyCountryRisk}"
											id="counterpartyCountryRisk"
											onchange="handleCountryChange(this)">
											<option value="">-- Select Country --</option>
											<option th:each="c : ${countryList}"
												th:value="${c.countryOfRisk}" th:text="${c.countryOfRisk}"></option>
										</select>
									</div>

								</div>

								<div class="form-group row">
									<label class="col-sm-2 col-form-label">CBUAE Regional
										Zone</label>
									<div class="col-sm-4">
										<input type="text" class="form-control"
											th:field="*{cbuaeRegionalZone}" id="cbuaeGeographicalZone"
											readonly />
									</div>
									<label class="col-sm-2 col-form-label">Nominal</label>
									<div class="col-sm-4">
										<input type="number" step="0.01" class="form-control"
											th:field="*{nominal}" id="nominal" />
									</div>
								</div>

								<div class="form-group row">
									<label class="col-sm-2 col-form-label">Nominal in AED</label>
									<div class="col-sm-4">
										<input type="number" step="0.01" class="form-control"
											th:field="*{nominalInAed}" id="nominalInAed" />
									</div>
									<label class="col-sm-2 col-form-label">Currency</label>
									<div class="col-sm-4">

										<select class="form-control" th:field="*{currency}"
											id="currency">
											<option value="" disabled selected>-- Select --</option>
											<option value="AED">AED</option>
											<option value="AFN">AFN</option>
											<option value="ALL">ALL</option>
											<option value="AMD">AMD</option>
											<option value="ANG">ANG</option>
											<option value="AOA">AOA</option>
											<option value="ARS">ARS</option>
											<option value="AUD">AUD</option>
											<option value="AWG">AWG</option>
											<option value="AZN">AZN</option>
											<option value="BAM">BAM</option>
											<option value="BBD">BBD</option>
											<option value="BDT">BDT</option>
											<option value="BGN">BGN</option>
											<option value="BHD">BHD</option>
											<option value="BIF">BIF</option>
											<option value="BMD">BMD</option>
											<option value="BND">BND</option>
											<option value="BOB">BOB</option>
											<option value="BOV">BOV</option>
											<option value="BTN">BTN</option>
											<option value="BWP">BWP</option>
											<option value="BYN">BYN</option>
											<option value="BZD">BZD</option>
											<option value="CAD">CAD</option>
											<option value="CDF">CDF</option>
											<option value="CHE">CHE</option>
											<option value="CHF">CHF</option>
											<option value="CHW">CHW</option>
											<option value="CLF">CLF</option>
											<option value="CLP">CLP</option>
											<option value="CNY">CNY</option>
											<option value="COP">COP</option>
											<option value="COU">COU</option>
											<option value="CRC">CRC</option>
											<option value="CUC">CUC</option>



											<option value="CUP">CUP</option>
											<option value="CVE">CVE</option>
											<option value="CZK">CZK</option>
											<option value="DJF">DJF</option>
											<option value="DKK">DKK</option>
											<option value="DOP">DOP</option>
											<option value="DZD">DZD</option>
											<option value="EGP">EGP</option>
											<option value="ERN">ERN</option>
											<option value="ETB">ETB</option>
											<option value="EUR">EUR</option>

											<option value="FJD">FJD</option>
											<option value="FKP">FKP</option>
											<option value="GBP">GBP</option>
											<option value="GEL">GEL</option>
											<option value="GHS">GHS</option>
											<option value="GIP">GIP</option>
											<option value="GMD">GMD</option>
											<option value="GNF">GNF</option>
											<option value="GTQ">GTQ</option>
											<option value="GYD">GYD</option>
											<option value="HKD">HKD</option>

											<option value="HNL">HNL</option>
											<option value="HTG">HTG</option>
											<option value="HUF">HUF</option>
											<option value="IDR">IDR</option>
											<option value="ILS">ILS</option>
											<option value="INR">INR</option>
											<option value="IQD">IQD</option>
											<option value="IRR">IRR</option>
											<option value="ISK">ISK</option>
											<option value="JMD">JMD</option>
											<option value="JOD">JOD</option>
											<option value="JPY">JPY</option>

											<option value="KES">KES</option>
											<option value="KGS">KGS</option>
											<option value="KHR">KHR</option>
											<option value="KMF">KMF</option>
											<option value="KPW">KPW</option>
											<option value="KRW">KRW</option>
											<option value="KWD">KWD</option>
											<option value="KYD">KYD</option>
											<option value="KZT">KZT</option>
											<option value="LAK">LAK</option>
											<option value="LBP">LBP</option>
											<option value="LKR">LKR</option>

											<option value="LRD">LRD</option>
											<option value="LSL">LSL</option>
											<option value="LYD">LYD</option>
											<option value="MAD">MAD</option>
											<option value="MDL">MDL</option>
											<option value="MKD">MKD</option>
											<option value="MMK">MMK</option>
											<option value="MNT">MNT</option>
											<option value="MOP">MOP</option>
											<option value="MRU">MRU</option>
											<option value="MUR">MUR</option>
											<option value="MVR">MVR</option>

											<option value="MWK">MWK</option>
											<option value="MXN">MXN</option>
											<option value="MXV">MXV</option>
											<option value="MYR">MYR</option>
											<option value="MZN">MZN</option>
											<option value="NAD">NAD</option>
											<option value="NGN">NGN</option>
											<option value="NIO">NIO</option>
											<option value="NOK">NOK</option>
											<option value="NPR">NPR</option>
											<option value="NZD">NZD</option>
											<option value="OMR">OMR</option>
											<option value="Other">Other</option>

											<option value="PAB">PAB</option>
											<option value="PEN">PEN</option>
											<option value="PGK">PGK</option>
											<option value="PHP">PHP</option>
											<option value="PKR">PKR</option>
											<option value="PLN">PLN</option>
											<option value="PYG">PYG</option>
											<option value="QAR">QAR</option>
											<option value="RON">RON</option>
											<option value="RSD">RSD</option>
											<option value="RUB">RUB</option>
											<option value="RWF">RWF</option>
											<option value="SAR">SAR</option>
										</select>
									</div>
								</div>

								<div class="form-group row">
									<label class="col-sm-2 col-form-label">Rate Type</label>
									<div class="col-sm-4">

										<select class="form-control" th:field="*{rateType}"
											id="rateType">
											<option value="" disabled selected>-- Select --</option>
											<option value="Fixed">Fixed</option>
											<option value="Floating">Floating</option>
											<option value="Administrative">Administrative</option>
										</select>
									</div>
									<label class="col-sm-2 col-form-label">Deposit
										Fixed/Admin Rate (%)</label>
									<div class="col-sm-4">
										<input type="number" step="0.0001" class="form-control"
											th:field="*{depositFixedRateOrAdministrativeRate}"
											id="depositFixedRateOrAdministrativeRate" />
									</div>
								</div>

								<div class="form-group row">
									<label class="col-sm-2 col-form-label">Benchmark
										Floating Rate</label>
									<div class="col-sm-4">
										<input type="text" class="form-control"
											th:field="*{benchmarkFloatingRate}"
											id="benchmarkFloatingRate" />
									</div>
									<label class="col-sm-2 col-form-label">Tenor Floating
										Rate</label>
									<div class="col-sm-4">
										<input type="text" class="form-control"
											th:field="*{tenorFloatingRate}" id="tenorFloatingRate" />
									</div>
								</div>
								<div class="form-group row">
									<label class="col-sm-2 col-form-label">Spread Over
										Benchmark Rate</label>
									<div class="col-sm-4">
										<input type="number" step="0.0001" class="form-control"
											th:field="*{spreadOverBenchmarkRate}"
											id="spreadOverBenchmarkRate" />
									</div>
									<label class="col-sm-2 col-form-label">Maturity Date</label>
									<div class="col-sm-4">
										<input type="date" class="form-control"
											th:field="*{maturityDate}" id="maturityDate" />
									</div>
								</div>

								<div class="form-group row">
									<label class="col-sm-2 col-form-label">Tenor (Mths)</label>
									<div class="col-sm-4">
										<input type="number" class="form-control"
											th:field="*{tenorMths}" id="tenorMths" />
									</div>
									<label class="col-sm-2 col-form-label">Maturity Period</label>
									<div class="col-sm-4">
										<input type="number" class="form-control"
											th:field="*{maturityPeriod}" id="maturityPeriod" />
									</div>
								</div>



						


							<!-- Submit -->
							<div class="card-footer text-center">
								<button type="submit" class="role-add-btn"
									onclick="updateform(event)">Update</button>
								<a th:href="@{/Foreign_Currency_Deposit(formmode='list')}"
									class="role-add-btn" style="text-decoration: none;">Cancel</a>
							</div>
	</div>
						</div>
					</form>
				</div>
			</div>
		</div>


		<div class="modal fade" id="datadelete">
			<div
				class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
				<div class="modal-content">
					<div class="modal-body"
						style="margin-top: 8px; text-align: center; color: #f15362;">
						<button type="button" class="close" data-dismiss="modal">Ã—</button>
						Are you Sure want to delete?
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-primary"
							onclick="submitformdelete(this);" th:attr="data-formmode=delete">Submit</button>
						<button type="button" class="btn btn-primary" data-dismiss="modal">Cancel</button>
					</div>
				</div>
			</div>
		</div>
		<div class="modal fade" id="formmsg">
			<div
				class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
				<div class="modal-content">
					<div class="modal-body"
						style="margin-top: 8px; text-align: center; color: aliceblue;">
						<button type="button" class="close" data-dismiss="modal">Ã—</button>
						<a th:value="${msg}"></a>
					</div>
					<div class="modal-footer"
						style="background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(8px); padding: 10px; border-top: 2px solid #ccc;">
						<button type="button" class="btn btn-primary"
							onclick="submitformdelete(this);" th:attr="data-formmode=delete">Submit</button>
						<button type="button" class="btn btn-primary" data-dismiss="modal">Cancel</button>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="modal fade" id="alert">
		<div
			class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
			<div class="modal-content">
				<div class="menu-title-header">
					<div class="modal-title" id="exampleModalLabel"
						style="text-align: center; color: white;">BANK OF BARODA</div>
				</div>
				<div class="modal-body" style="text-align: center">
					<p id="alertmsg"></p>
					<button type="button" class="role-add-btn" onclick="list()"
						data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>
	<!-- Floating Back Button -->
	<button id="floatingBackBtn" onclick="goBack()" title="Go Back">
		<i class="fa fa-arrow-left"></i>
	</button>
	<!-- Floating Forward Button -->
	<button id="floatingForwardBtn" onclick="goForward()"
		title="Go Forward">
		<i class="fa fa-arrow-right"></i>
	</button>
	<div class="modal fade" id="alert1">
		<div
			class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
			<div class="modal-content">
				<div class="menu-title-header">
					<div class="modal-title" id="exampleModalLabel"
						style="text-align: center; color: white;">BANK OF BARODA</div>
				</div>
				<div class="modal-body" style="text-align: center">
					<p id="alertmsg1"></p>
					<button type="button" class="role-add-btn" onclick="fxrisk()"
						data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>
	<div class="modal fade" id="loader" data-backdrop="static"
		data-keyboard="false">
		<div
			class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
			<div class="modal-content" style="background: transparent;">
				<div class="modal-body" style="text-align: center">
					<div>
						<img th:src=@{/images/loader.gif} id="bfirelogo"
							style="width: 153px; height: auto; margin-left: 18px; background-color: transparent; border-color: transparent;"
							alt="Bornfire">
					</div>
				</div>
			</div>
		</div>
	</div>
<div id="bob-loader" class="bob-loader" aria-hidden="true"
		role="status" aria-label="Loading">
		<div class="bob-loader-card">
			<img th:src="@{/images/bobn.png}" alt="Bank of Baroda"
				class="logo-imgs">
			<div class="flow-bar">
				<div class="flow-line"></div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="downloadProcessingModal" tabindex="-1"
		role="dialog" aria-labelledby="downloadProcessingModalLabel"
		aria-hidden="true">
		<div
			class="modal-dialog modal-dialog-centered d-flex align-items-center"
			role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="downloadProcessingModalLabel">Download
						Processing...</h5>
				</div>
			</div>
		</div>
	</div>
	<!-- Download Message -->
	<div class="modal fade" id="customAlertModal" tabindex="-1"
		role="dialog" aria-labelledby="customAlertModalLabel"
		aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="customAlertModalLabel">Successfully</h5>
				</div>
				<div class="modal-body" id="customAlertBody"></div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary" data-dismiss="modal"
						onclick="list()">OK</button>
				</div>
			</div>
		</div>
	</div>

</body>
<script>
	$('#usertable').DataTable({
				    scrollX: true,
				    autoWidth: false,
				    paging: true,
				    searching: true,
				    lengthChange: false,
				    ordering: true,
				    pageLength: 10,
				    fixedHeader: true,

				    // Layout: search (left) + pagination (right)
				    dom: '<"d-flex justify-content-between align-items-center mb-2"f p>t',

				    // Optional: language tweak for better label
				    language: {
				      search: "Search:"
				    }
				  });
				  
</script>


<!-- Include this after your DataTable initialization script -->

<style>
/* Remove top margin/padding from DataTables parent containers */
#data {
	padding-top: 0 !important;
	margin-top: 0 !important;
}

.table-responsive {
	margin-top: 0 !important;
	padding-top: 0 !important;
}

/* Ensure DataTables filter (search box) doesn't have spacing above it */
div.dataTables_filter {
	margin-top: 0 !important;
	padding-top: 0 !important;
}

/* FIX: Make search label and box inline */
.dataTables_filter label {
	display: flex !important;
	align-items: center;
	gap: 8px; /* space between text and input */
	margin-bottom: 0 !important;
}

/* Style pagination buttons */
.dataTables_wrapper .dataTables_paginate .paginate_button {
	padding: 0px;
}

/* Optional: Style the search input */
.dataTables_filter input {
	margin-left: 5px;
	flex: 1;
}
</style>


<script>
function handleBankChange(select) {
    const selectedBank = select.value;

    if (!selectedBank) {
        // Clear the fields
        $('#bankSymbol').val('');
        $('#conventionalIslamic').val('');
        $('#localForeign').val('');
        $('#cbuaeTiering').val('');
        return;
    }

    $.ajax({
    	url: '/BCDRS/getBankDetails',
        type: 'GET',
        data: { bankName: selectedBank },
        success: function(data) {
            $('#bankSymbol').val(data.bankSymbol || '');
            $('#conventionalIslamic').val(data.conventionalIslamic || '');
            $('#localForeign').val(data.localForeign || '');
            $('#cbuaeTiering').val(data.cbuaeTiering || '');
        },
        error: function(xhr, status, error) {
            console.error('AJAX Error:', error);
          //  alert('Failed to fetch bank details.');
        }
    });
}
</script>
<script>
function handleCountryChange(select) {
    const selectedCountry = select.value;

    if (!selectedCountry) {
        $('#cbuaeGeographicalZone').val('');
        return;
    }

    $.ajax({
        url: '/BCDRS/getCountryDetails',
        type: 'GET',
        data: { countryName: selectedCountry },
        success: function(data) {
            $('#cbuaeGeographicalZone').val(data.cbuaeGeographicalZone || '');
        },
        error: function(xhr, status, error) {
            console.error('AJAX Error:', error);
            alert('Failed to fetch geographical zone.');
        }
    });
}

// Run on page load (for edit mode)
window.onload = function() {
    const countrySelect = document.getElementById("countryOfRisk");
    if (countrySelect && countrySelect.value) {
        handleCountryChange(countrySelect);
    }
};
</script>

<script>
  const fieldRules = {
    // VARCHAR2 fields
    bankName: 100,
    headOfficeSubsidiary: 20,
    subsidiary: 50,
    bankSymbol: 30,
    conventionalOrIslamic: 50,
    localOrForeign: 50,
    cbuaeTiering: 50,
    depositInternalReference: 50,
    onBalanceSheetDepType: 20,
    fundingCounterParty: 50,
    counterpartyType: 50,
    industryGcis: 50,
    counterpartyCountryRisk: 50,
    cbuaeRegionalZone: 50,
    currency: 50,
    rateType: 50,
    benchmarkFloatingRate: 20,
    tenorFloatingRate: 10,

    // NUMBER(p,s) fields
    nominal: "24,2",
    nominalInAed: "24,2",
    depositFixedRateOrAdministrativeRate: "24,2",
    depFixedRateOrAdminisRate: "24,2",
    spreadOverBenchmarkRate: "24,2",
    tenorMths: "5,2",
    maturityPeriod: "24,2"
  };

  function showError(input, msg) {
    console.log("Showing error for", input.id, msg); // Debug
    let span = document.getElementById(input.id + "-error");
    if (!span) {
      span = document.createElement("small");
      span.id = input.id + "-error";
      span.className = "text-danger";
      span.style.display = "block";
      input.parentNode.appendChild(span);
    }
    span.innerText = msg;
  }


  function clearError(input) {
    const span = document.getElementById(input.id + "-error");
    if (span) span.innerText = "";
  }

  function validateInput(event) {
    const input = event.target;
    const rule = fieldRules[input.id];
    const value = input.value.trim();

    if (!rule || !value) {
      clearError(input);
      return;
    }

    if (typeof rule === "number") {
      // Text field with max length
      if (value.length > rule) {
        showError(input, `Max ${rule} characters allowed`);
      } else {
        clearError(input);
      }
    } else if (typeof rule === "string" && rule.includes(",")) {
      // Number field
      const [total, decimal] = rule.split(",").map(Number);
      const parts = value.split(".");
      const intLen = parts[0].replace(/^0+/, "").length;
      const decLen = parts[1] ? parts[1].length : 0;

      if (intLen + decLen > total || decLen > decimal) {
        showError(input, `Max ${total - decimal} digits before and ${decimal} after decimal`);
      } else {
        clearError(input);
      }
    }
  }

  document.addEventListener("DOMContentLoaded", () => {
    for (const id in fieldRules) {
      const input = document.getElementById(id);
      if (input) {
        input.addEventListener("input", validateInput);

        // Optional: Add maxlength attribute to text fields
        if (typeof fieldRules[id] === "number") {
          input.setAttribute("maxlength", fieldRules[id]);
        }
      }
    }
  });
</script>



</html>